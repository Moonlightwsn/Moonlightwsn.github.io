import{m as e,d as t,a,o as s,i as l,b as o,w as i,f as n,r as d,n as c,E as u,R as r,O as h,c as b,Z as p,$ as v,ar as f,av as m,p as _,aw as w,e as y,ax as g,u as x,j as $,P as k,a7 as C,ak as I,ay as S,az as z,aA as N,a5 as T,a1 as L,N as H,a0 as V,X as P,aB as R,aC as X,S as M,aD as G,s as W,v as E,aE as Y,aF as F,aG as j,g as B,h as A,t as D,F as O,D as Z,Y as q,aH as J,ab as K,aI as Q}from"./index-DaoIyQhi.js";const U=t({options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},__name:"BannerView",props:{bannerClass:{default:""},bannerHeight:{default:"360rpx"},bannerSrc:{default:""},customClass:{default:""},fixed:{type:Boolean,default:!0},placeholderHeight:{default:void 0}},setup:e=>(e,t)=>{const r=l;return s(),a(r,{class:o(`banner-view pb-160rpx h-screen w-screen overflow-y-auto overflow-x-hidden ${e.customClass}`)},{default:i(()=>[e.bannerSrc?(s(),a(r,{key:0,class:o(`banner fixed left-0 right-0 top-0 w-full ${e.bannerClass}`),style:c({height:e.bannerHeight,position:e.fixed?"fixed":"unset"})},{default:i(()=>[u("img",{class:"h-full w-full object-cover",src:e.bannerSrc,alt:"banner"},null,8,["src"])]),_:1},8,["class","style"])):n("",!0),d(e.$slots,"header"),e.fixed?(s(),a(r,{key:1,style:c({height:e.placeholderHeight??e.bannerHeight})},null,8,["style"])):n("",!0),d(e.$slots,"default")]),_:3},8,["class"])}}),ee=$(t({name:"wd-resize",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...h,customContainerClass:r("")},emits:["resize"],setup(t,{emit:n}){const u=t,r=n,h=e(0),$=e(0),k=e(0),C=e(0),I=e(0),S=e(0),z=e(0),N=b(()=>{const e={width:p(S.value),height:p(I.value)};return`${v(e)}${u.customStyle}`});let T=()=>{};const{proxy:L}=f(),H=e(`resize${m()}`);function V({lastWidth:e,lastHeight:t}){h.value=1e5+t,$.value=3*I.value+t,k.value=1e5+e,C.value=3*S.value+e}return _(()=>{w().in(L).select(`#${H.value}`).boundingClientRect().exec(([e])=>{let t=e.height,a=e.width;I.value=t,S.value=a,T=()=>{w().in(L).select(`#${H.value}`).boundingClientRect().exec(([e])=>{if(0===z.value++){const t={};["bottom","top","left","right","height","width"].forEach(a=>{t[a]=e[a]}),r("resize",t)}if(z.value<3)return;const s=e.height,l=e.width;I.value=s,S.value=l;const o=[];if(s!==t&&(t=s,o.push(1)),l!==a&&(a=l,o.push(1)),0!==o.length){const t={};["bottom","top","left","right","height","width"].forEach(a=>{t[a]=e[a]}),r("resize",t)}V({lastWidth:a,lastHeight:t})})},V({lastWidth:a,lastHeight:t})})}),(e,t)=>{const n=l,u=g;return s(),a(n,{class:o(`wd-resize ${e.customClass}`),style:c(N.value)},{default:i(()=>[y(n,{id:H.value,class:o(`wd-resize__container ${e.customContainerClass}`)},{default:i(()=>[d(e.$slots,"default",{},void 0,!0),y(u,{class:"wd-resize__wrapper","scroll-y":!0,"scroll-top":h.value,"scroll-x":!0,"scroll-left":k.value,onScroll:x(T)},{default:i(()=>[y(n,{class:"wd-resize__wrapper--placeholder",style:{height:"100000px",width:"100000px"}})]),_:1},8,["scroll-top","scroll-left","onScroll"]),y(u,{class:"wd-resize__wrapper","scroll-y":!0,"scroll-top":$.value,"scroll-x":!0,"scroll-left":C.value,onScroll:x(T)},{default:i(()=>[y(n,{class:"wd-resize__wrapper--placeholder",style:{height:"250%",width:"250%"}})]),_:1},8,["scroll-top","scroll-left","onScroll"])]),_:3},8,["id","class"])]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-62bdf40e"]]),te={...h,zIndex:k(1),offsetTop:k(0)},ae=Symbol("wd-sticky-box"),se=$(t({name:"wd-sticky",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:te,setup(t,{expose:n}){const u=t,r=e(`wd-sticky${m()}`),h=e([]),_=C({position:"absolute",boxLeaved:!1,top:0,height:0,width:0,state:""}),{parent:w}=I(ae),{proxy:g}=f(),x=b(()=>{const e={"z-index":u.zIndex,height:p(_.height),width:p(_.width)};return _.boxLeaved||(e.position="relative"),`${v(e)}${u.customStyle}`}),$=b(()=>{const e={"z-index":u.zIndex,height:p(_.height),width:p(_.width)};return _.boxLeaved||(e.position="relative"),`${v(e)}`}),k=b(()=>{const e={position:_.position,top:p(_.top)};return v(e)}),T=b(()=>{let e=0;return e=44,44+u.offsetTop});async function L(e){_.width=e.width,_.height=e.height,await S(),function(){if(0===_.height&&0===_.width)return;const e=T.value+_.height;(function(){for(;0!==h.value.length;)h.value.pop().disconnect()})(),function(){const e=N(g,{thresholds:[0,.5]});return h.value.push(e),e}().relativeToViewport({top:-e}).observe(`#${r.value}`,e=>{H(e)}),z(`#${r.value}`,!1,g).then(t=>{t.bottom=Number(t.bottom)+44,Number(t.bottom)<=e&&H({boundingClientRect:t})})}(),w&&w.observerForChild&&w.observerForChild(g)}function H({boundingClientRect:e}){if(w&&w.boxStyle&&_.height>=w.boxStyle.height)return _.position="absolute",void(_.top=0);let t=e.top<=T.value;t=e.top<T.value,t?(_.state="sticky",_.boxLeaved=!1,_.position="fixed",_.top=T.value):(_.state="normal",_.boxLeaved=!1,_.position="absolute",_.top=0)}return n({setPosition:function(e,t,a){_.boxLeaved=e,_.position=t,_.top=a},stickyState:_,offsetTop:u.offsetTop}),(e,t)=>{const n=l;return s(),a(n,{style:c(`${x.value};display: inline-block;`)},{default:i(()=>[y(n,{class:o(`wd-sticky ${e.customClass}`),style:c($.value),id:r.value},{default:i(()=>[y(n,{class:"wd-sticky__container",style:c(k.value)},{default:i(()=>[y(ee,{onResize:L,"custom-style":"display: inline-block;"},{default:i(()=>[d(e.$slots,"default",{},void 0,!0)]),_:3})]),_:3},8,["style"])]),_:3},8,["class","style","id"])]),_:3},8,["style"])}}}),[["__scopeId","data-v-8d1fe2cc"]]),le=$(t({name:"wd-sticky-box",options:{addGlobalClass:!0,styleIsolation:"shared"},props:h,setup(t){const n=t,u=e(`wd-sticky-box${m()}`),r=e(new Map),h=C({height:0,width:0}),{proxy:b}=f(),{children:p,linkChildren:v}=T(ae);function _(e){h.width=e.width,h.height=e.height;const t=r.value;r.value=new Map;for(const[a]of t){w(p.find(e=>e.$.uid===a))}t.forEach(e=>{e.disconnect()}),t.clear()}function w(e){!function(e){const t=r.value.get(e.$.uid);t&&(t.disconnect(),r.value.delete(e.$.uid))}(e);const t=function(e){const t=N(b,{thresholds:[0,.5]});return r.value.set(e.$.uid,t),t}(e),a=e.$.exposed;let s=a.stickyState.height+a.offsetTop;s+=44,h.height<=a.stickyState.height&&a.setPosition(!1,"absolute",0),t.relativeToViewport({top:-s}).observe(`#${u.value}`,e=>{g(a,e)}),z(`#${u.value}`,!1,b).then(e=>{e.bottom=Number(e.bottom)+44,Number(e.bottom)<=s&&g(a,{boundingClientRect:e})}).catch(e=>{console.log(e)})}function g(e,{boundingClientRect:t}){let a=e.offsetTop;a+=44;const s=e.stickyState.height+a;let l=t.bottom<=s;if(l=t.bottom<s,l)e.setPosition(!0,"absolute",t.height-e.stickyState.height);else if(t.top<=s&&!l){if("normal"===e.stickyState.state)return;e.setPosition(!1,"fixed",a)}}return v({boxStyle:h,observerForChild:w}),L(()=>{r.value=new Map}),(e,t)=>{const r=l;return s(),a(r,{style:{position:"relative"}},{default:i(()=>[y(r,{class:o(`wd-sticky-box ${n.customClass}`),style:c(e.customStyle),id:u.value},{default:i(()=>[y(ee,{onResize:_},{default:i(()=>[d(e.$slots,"default",{},void 0,!0)]),_:3})]),_:3},8,["class","style","id"])]),_:3})}}}),[["__scopeId","data-v-19ffe98b"]]),oe=Symbol("wd-tabs"),ie=$(t({name:"wd-tabs",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...h,modelValue:P(0),slidableNum:k(6),mapNum:k(10),mapTitle:String,sticky:H(!1),offsetTop:k(0),swipeable:H(!1),autoLineWidth:H(!1),lineWidth:V,lineHeight:V,color:r(""),inactiveColor:r(""),animated:H(!1),duration:k(300),slidable:r("auto")},emits:["change","disabled","click","update:modelValue"],setup(t,{expose:u,emit:r}){const h=".wd-tabs__nav-item",m=t,w=r,{translate:$}=R("tabs"),k=C({activeIndex:0,lineStyle:"display:none;",useInnerLine:!1,inited:!1,animating:!1,mapShow:!1,scrollLeft:0}),{children:I,linkChildren:S}=T(oe);S({state:k,props:m});const{proxy:N}=f(),L=function(){const t=e(""),a=e(0),s=e(0),l=e(0),o=e(0),i=e(0),n=e(0);return{touchStart:function(e){const d=e.touches[0];t.value="",a.value=0,s.value=0,l.value=0,o.value=0,i.value=d.clientX,n.value=d.clientY},touchMove:function(e){const d=e.touches[0];a.value=d.clientX-i.value,s.value=d.clientY-n.value,l.value=Math.abs(a.value),o.value=Math.abs(s.value),t.value=l.value>o.value?"horizontal":l.value<o.value?"vertical":""},direction:t,deltaX:a,deltaY:s,offsetX:l,offsetY:o,startX:i,startY:n}}(),H=b(()=>"always"===m.slidable||I.length>m.slidableNum),V=b(()=>m.animated?v({left:-100*k.activeIndex+"%","transition-duration":m.duration+"ms","-webkit-transition-duration":m.duration+"ms"}):""),P=(e,t)=>q(e.name)?e.name:t,U=(e=0,t=!1,a=!0)=>{0!==I.length&&(e=re(e),I[e].disabled||(k.activeIndex=e,a&&(ae(!1===t),ie()),function(){if(!k.inited)return;const e=P(I[k.activeIndex],k.activeIndex);e!==m.modelValue&&(w("change",{index:k.activeIndex,name:e}),w("update:modelValue",e))}()))},ee=X(U,100,{leading:!0});function te(){k.mapShow?(k.animating=!1,setTimeout(()=>{k.mapShow=!1},300)):(k.mapShow=!0,setTimeout(()=>{k.animating=!0},100))}async function ae(e=!0){if(!k.inited)return;const{autoLineWidth:t,lineWidth:a,lineHeight:s}=m;try{const l={};if(q(a))l.width=p(a);else if(t){const e=await z(".wd-tabs__nav-item-text",!0,N),t=Number(e[k.activeIndex].width);l.width=p(t)}q(s)&&(l.height=p(s),l.borderRadius=`calc(${p(s)} / 2)`);const o=await z(h,!0,N),i=o[k.activeIndex];let n=o.slice(0,k.activeIndex).reduce((e,t)=>e+Number(t.width),0)+Number(i.width)/2;n&&(l.transform=`translateX(${n}px) translateX(-50%)`,e&&(l.transition="width 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);"),k.useInnerLine=!1,k.lineStyle=v(l))}catch(l){console.error("[wot ui] error(wd-tabs): update line style failed",l)}}function ie(){k.inited&&Promise.all([z(h,!0,N),z(".wd-tabs__nav-container",!1,N)]).then(([e,t])=>{const a=e[k.activeIndex],s=e.slice(0,k.activeIndex).reduce((e,t)=>e+t.width,0)-(t.width-Number(a.width))/2;s===k.scrollLeft?k.scrollLeft=s+Math.random()/1e4:k.scrollLeft=s})}function ne(e){if(void 0===e)return;const{disabled:t}=I[e],a=P(I[e],e);t?w("disabled",{index:e,name:a}):(k.mapShow&&te(),ee(e),w("click",{index:e,name:a}))}function de(e){m.swipeable&&L.touchStart(e)}function ce(e){m.swipeable&&L.touchMove(e)}function ue(){if(!m.swipeable)return;const{direction:e,deltaX:t,offsetX:a}=L;"horizontal"===e.value&&a.value>=50&&(t.value>0&&0!==k.activeIndex?ee(k.activeIndex-1):t.value<0&&k.activeIndex!==I.length-1&&ee(k.activeIndex+1))}function re(e){if(J(e)&&e>=I.length&&(console.error("[wot ui] warning(wd-tabs): the type of tabs' value is Number shouldn't be less than its children"),e=0),K(e)){const t=I.findIndex(t=>t.name===e);e=-1===t?0:t}return e}return M(()=>m.modelValue,e=>{J(e)||K(e)||console.error("[wot ui] error(wd-tabs): the type of value should be number or string"),""!==e&&q(e)||console.error("[wot ui] error(wd-tabs): tabs's value cannot be '' null or undefined"),"number"==typeof e&&e<0&&console.error("[wot ui] error(wd-tabs): tabs's value cannot be less than zero")},{immediate:!0,deep:!0}),M(()=>m.modelValue,e=>{const t=re(e);ee(e,!1,t!==k.activeIndex)},{immediate:!1,deep:!0}),M(()=>I.length,()=>{k.inited&&G(()=>{ee(m.modelValue)})}),M(()=>m.slidableNum,e=>{Q(e,"slidableNum")}),M(()=>m.mapNum,e=>{Q(e,"mapNum")}),_(()=>{k.inited=!0,G(()=>{U(m.modelValue,!0),k.useInnerLine=!0})}),u({setActive:ee,scrollIntoView:ie,updateLineStyle:ae}),(e,t)=>{const u=B,r=Y,h=l,b=g;return e.sticky?(s(),a(le,{key:0},{default:i(()=>[y(h,{class:o(`wd-tabs ${e.customClass} ${H.value?"is-slide":""} ${e.mapNum<x(I).length&&0!==e.mapNum?"is-map":""}`),style:c(e.customStyle)},{default:i(()=>[y(se,{"offset-top":e.offsetTop},{default:i(()=>[y(h,{class:"wd-tabs__nav wd-tabs__nav--sticky"},{default:i(()=>[y(h,{class:"wd-tabs__nav--wrap"},{default:i(()=>[y(b,{"scroll-x":H.value,"scroll-with-animation":"","scroll-left":k.scrollLeft},{default:i(()=>[y(h,{class:"wd-tabs__nav-container"},{default:i(()=>[(s(!0),W(O,null,E(x(I),(t,l)=>(s(),a(h,{onClick:e=>ne(l),key:l,class:o(`wd-tabs__nav-item  ${k.activeIndex===l?"is-active":""} ${t.disabled?"is-disabled":""}`),style:c(k.activeIndex===l?e.color?"color:"+e.color:"":e.inactiveColor?"color:"+e.inactiveColor:"")},{default:i(()=>[t.badgeProps?(s(),a(r,F(j({key:0},t.badgeProps)),{default:i(()=>[y(u,{class:"wd-tabs__nav-item-text"},{default:i(()=>[A(D(t.title),1)]),_:2},1024)]),_:2},1040)):(s(),a(u,{key:1,class:"wd-tabs__nav-item-text"},{default:i(()=>[A(D(t.title),1)]),_:2},1024)),k.activeIndex===l&&k.useInnerLine?(s(),a(h,{key:2,class:"wd-tabs__line wd-tabs__line--inner"})):n("",!0)]),_:2},1032,["onClick","class","style"]))),128)),y(h,{class:"wd-tabs__line",style:c(k.lineStyle)},null,8,["style"])]),_:1})]),_:1},8,["scroll-x","scroll-left"])]),_:1}),e.mapNum<x(I).length&&0!==e.mapNum?(s(),a(h,{key:0,class:"wd-tabs__map"},{default:i(()=>[y(h,{class:o("wd-tabs__map-btn  "+(k.animating?"is-open":"")),onClick:te},{default:i(()=>[y(h,{class:o("wd-tabs__map-arrow  "+(k.animating?"is-open":""))},{default:i(()=>[y(Z,{name:"arrow-down"})]),_:1},8,["class"])]),_:1},8,["class"]),y(h,{class:"wd-tabs__map-header",style:c(`${k.mapShow?"":"display:none;"}  ${k.animating?"opacity:1;":""}`)},{default:i(()=>[A(D(e.mapTitle||x($)("all")),1)]),_:1},8,["style"]),y(h,{class:o("wd-tabs__map-body  "+(k.animating?"is-open":"")),style:c(k.mapShow?"":"display:none")},{default:i(()=>[(s(!0),W(O,null,E(x(I),(t,l)=>(s(),a(h,{class:"wd-tabs__map-nav-item",key:l,onClick:e=>ne(l)},{default:i(()=>[y(h,{class:o(`wd-tabs__map-nav-btn ${k.activeIndex===l?"is-active":""}  ${t.disabled?"is-disabled":""}`),style:c(k.activeIndex===l?e.color?"color:"+e.color+";border-color:"+e.color:"":e.inactiveColor?"color:"+e.inactiveColor:"")},{default:i(()=>[A(D(t.title),1)]),_:2},1032,["class","style"])]),_:2},1032,["onClick"]))),128))]),_:1},8,["class","style"])]),_:1})):n("",!0)]),_:1})]),_:1},8,["offset-top"]),y(h,{class:"wd-tabs__container",onTouchstart:de,onTouchmove:ce,onTouchend:ue,onTouchcancel:ue},{default:i(()=>[y(h,{class:o(["wd-tabs__body",e.animated?"is-animated":""]),style:c(V.value)},{default:i(()=>[d(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","style"])]),_:3}),y(h,{class:"wd-tabs__mask",style:c(`${k.mapShow?"":"display:none;"} ${k.animating?"opacity:1;":""}`),onClick:te},null,8,["style"])]),_:3},8,["class","style"])]),_:3})):(s(),a(h,{key:1,class:o(`wd-tabs ${e.customClass} ${H.value?"is-slide":""} ${e.mapNum<x(I).length&&0!==e.mapNum?"is-map":""}`)},{default:i(()=>[y(h,{class:"wd-tabs__nav"},{default:i(()=>[y(h,{class:"wd-tabs__nav--wrap"},{default:i(()=>[y(b,{"scroll-x":H.value,"scroll-with-animation":"","scroll-left":k.scrollLeft},{default:i(()=>[y(h,{class:"wd-tabs__nav-container"},{default:i(()=>[(s(!0),W(O,null,E(x(I),(t,l)=>(s(),a(h,{onClick:e=>ne(l),key:l,class:o(`wd-tabs__nav-item ${k.activeIndex===l?"is-active":""} ${t.disabled?"is-disabled":""}`),style:c(k.activeIndex===l?e.color?"color:"+e.color:"":e.inactiveColor?"color:"+e.inactiveColor:"")},{default:i(()=>[t.badgeProps?(s(),a(r,j({key:0,"custom-class":"wd-tabs__nav-item-badge"},t.badgeProps),{default:i(()=>[y(u,{class:"wd-tabs__nav-item-text"},{default:i(()=>[A(D(t.title),1)]),_:2},1024)]),_:2},1040)):(s(),a(u,{key:1,class:"wd-tabs__nav-item-text"},{default:i(()=>[A(D(t.title),1)]),_:2},1024)),k.activeIndex===l&&k.useInnerLine?(s(),a(h,{key:2,class:"wd-tabs__line wd-tabs__line--inner"})):n("",!0)]),_:2},1032,["onClick","class","style"]))),128)),y(h,{class:"wd-tabs__line",style:c(k.lineStyle)},null,8,["style"])]),_:1})]),_:1},8,["scroll-x","scroll-left"])]),_:1}),e.mapNum<x(I).length&&0!==e.mapNum?(s(),a(h,{key:0,class:"wd-tabs__map"},{default:i(()=>[y(h,{class:"wd-tabs__map-btn",onClick:te},{default:i(()=>[y(h,{class:o("wd-tabs__map-arrow "+(k.animating?"is-open":""))},{default:i(()=>[y(Z,{name:"arrow-down"})]),_:1},8,["class"])]),_:1}),y(h,{class:"wd-tabs__map-header",style:c(`${k.mapShow?"":"display:none;"}  ${k.animating?"opacity:1;":""}`)},{default:i(()=>[A(D(e.mapTitle||x($)("all")),1)]),_:1},8,["style"]),y(h,{class:o("wd-tabs__map-body "+(k.animating?"is-open":"")),style:c(k.mapShow?"":"display:none")},{default:i(()=>[(s(!0),W(O,null,E(x(I),(e,t)=>(s(),a(h,{class:"wd-tabs__map-nav-item",key:t,onClick:e=>ne(t)},{default:i(()=>[y(h,{class:o(`wd-tabs__map-nav-btn ${k.activeIndex===t?"is-active":""}  ${e.disabled?"is-disabled":""}`)},{default:i(()=>[A(D(e.title),1)]),_:2},1032,["class"])]),_:2},1032,["onClick"]))),128))]),_:1},8,["class","style"])]),_:1})):n("",!0)]),_:1}),y(h,{class:"wd-tabs__container",onTouchstart:de,onTouchmove:ce,onTouchend:ue,onTouchcancel:ue},{default:i(()=>[y(h,{class:o(["wd-tabs__body",e.animated?"is-animated":""]),style:c(V.value)},{default:i(()=>[d(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","style"])]),_:3}),y(h,{class:"wd-tabs__mask",style:c(`${k.mapShow?"":"display:none;"}  ${k.animating?"opacity:1":""}`),onClick:te},null,8,["style"])]),_:3},8,["class"]))}}}),[["__scopeId","data-v-c86d9020"]]),ne=$(t({name:"wd-tab",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...h,name:V,title:String,disabled:H(!1),lazy:H(!0),badgeProps:Object},setup(t){const u=t,{proxy:r}=f(),{parent:h,index:p}=I(oe),m=b(()=>!!q(h)&&h.state.activeIndex===p.value),_=e(m.value),w=b(()=>{const e={};return m.value||q(h)&&h.props.animated||(e.display="none"),v(e)}),y=b(()=>!u.lazy||_.value||m.value);return M(m,e=>{e&&(_.value=!0)}),M(()=>u.name,e=>{!q(e)||J(e)||K(e)?h&&function(e){const{name:t}=u;if(null==t||""===t)return;h&&h.children.forEach(a=>{a.$.uid!==e.$.uid&&a.name===t&&console.error(`The tab's bound value: ${t} has been used`)})}(r):console.error("[wot ui] error(wd-tab): the type of name should be number or string")},{deep:!0,immediate:!0}),(e,t)=>{const u=l;return s(),a(u,{class:o(`wd-tab ${e.customClass}`),style:c(e.customStyle)},{default:i(()=>[y.value?(s(),a(u,{key:0,class:o(["wd-tab__body",{"wd-tab__body--inactive":!m.value}]),style:c(w.value)},{default:i(()=>[d(e.$slots,"default",{},void 0,!0)]),_:3},8,["class","style"])):n("",!0)]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-79c06c35"]]);export{U as _,ie as a,ne as b};
