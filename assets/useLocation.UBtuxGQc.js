import{T as t,U as i,p as e,F as n,C as a,G as o}from"./index-BAYT1_GE.js";const l=t("location",{state:()=>({loading:!1,longitude:null,latitude:null}),actions:{async updateCurrentLocation(){return new Promise((t,e)=>{this.loading=!0,i({type:"wgs84",success:i=>{if(i){const{latitude:e,longitude:n}=i;this.latitude=e,this.longitude=n,t(i)}else t(void 0)},fail:t=>{e(t)},complete:()=>{this.loading=!1}})})}}});function s(){const t=l();return{loading:e(()=>t.loading),latitude:e(()=>t.latitude),longitude:e(()=>t.longitude),update:function(i=!0){return i&&n({title:"正在获取定位..."}),t.updateCurrentLocation().catch(t=>{i&&a({icon:"error",title:t.message||"定位失败"})}).finally(()=>{i&&o()})}}}export{s as u};
