import{W as t,X as e,p as i,I as n,D as o,J as a}from"./index-Bly4hIk5.js";const l=t("location",{state:()=>({loading:!1,longitude:null,latitude:null}),actions:{async updateCurrentLocation(){return new Promise((t,i)=>{this.loading=!0,e({type:"wgs84",success:e=>{if(e){const{latitude:i,longitude:n}=e;this.latitude=i,this.longitude=n,t(e)}else t(void 0)},fail:t=>{i(t)},complete:()=>{this.loading=!1}}),setTimeout(()=>{i(new Error("获取定位超时"))},1e4)})}}});function s(){const t=l();return{loading:i(()=>t.loading),latitude:i(()=>t.latitude),longitude:i(()=>t.longitude),update:function(e=!1){return e&&n({title:"正在获取定位..."}),t.updateCurrentLocation().catch(t=>{e&&o({icon:"error",title:t.message||"定位失败"})}).finally(()=>{e&&a()})}}}export{s as u};
