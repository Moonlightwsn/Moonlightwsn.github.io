import{_ as e}from"./BgView.zAoDi5md.js";import{_ as t}from"./PyText.vue_vue_type_script_setup_true_lang.1L9IIHvr.js";import{_ as s}from"./wd-divider.Cc4zUyyv.js";import{_ as r,a}from"./wd-col.BoohVz6c.js";import{aa as l,G as n,ab as i,ac as o,I as c,D as p,U as u,Y as f,X as x,p as d,d as m,H as g,B as h,c as b,w as A,r as w,a as I,b as y,A as v,e as k,F,v as z,a7 as U,ad as j,x as C,y as T}from"./index-Bpal6X9u.js";import{_ as D}from"./PyTitle.Dn6RlDza.js";import{p as B,s as J,a as Y}from"./page-bg-3.BQUenM3F.js";import"./wd-text.COOnfa1A.js";const Q="/assets/digital-id-DnfwsGFg.png",V=(e,t="")=>{n({title:"上传中"});const s=i();return new Promise(r=>{o({url:"https://test-stub.chainable.com.cn:16380/app-api/infra/file/upload",filePath:e,name:"file",header:{Accept:"*/*",Authorization:`Bearer ${s.value}`},formData:{directory:t},success:e=>{const t=JSON.parse(e.data);if(1!==t.error)return r(t);p({icon:"none",title:t.msg})},fail:e=>(console.log("上传失败：",e),r(!1)),complete:()=>{c()}})})};function N(e){const{count:t,sizeType:s=["original","compressed"],sourceType:r=["album","camera"],extension:a}=e;return new Promise((e,n)=>{l({count:t,sizeType:s,sourceType:r,extension:a,success(t){e(function(e,t){return e.tempFiles.forEach((e,s)=>{e.name||(e.name=e.path.slice(Math.max(0,e.path.lastIndexOf("/")+1))),e.fileType=t,e.cloudPath=`${Date.now()}_${s}${e.name.slice(Math.max(0,e.name.lastIndexOf(".")))}`}),e.tempFilePaths||(e.tempFilePaths=e.tempFiles.map(e=>e.path)),e}(t,"image"))},fail(e){const t=e.errMsg.replace("chooseImage:fail","chooseAndUploadFile:fail");n(new Error(t))}})})}function _(e){const t=e||{directory:void 0};return async function(e,{onChooseFile:t,directory:s}){const r=await e;let a=r.tempFiles||[];if(t){const e=t(r);void 0!==e&&(a=await Promise.resolve(e),void 0===a&&(a=r.tempFiles||[]))}for(const l of a){const{data:e}=await V(l.path,s)||{};l.url=e}return a}(N(t),t)}const O=u("profile",{state:()=>({loading:!1,userInfo:{nickname:"",avatar:"",mobile:""}}),actions:{innerUpdateUserInfo(e){this.userInfo.nickname=e.nickname,this.userInfo.avatar=e.avatar,this.userInfo.mobile=e.mobile,this.userInfo.sex=e.sex},async getUserInfo(){this.loading=!0;try{const e=await f.app.getUserInfo();(null==e?void 0:e.data)&&this.innerUpdateUserInfo(e.data)}finally{this.loading=!1}},async updateUserInfo(e){var t,s,r,a;const l={nickname:(null==(t=this.userInfo)?void 0:t.nickname)||"",avatar:(null==(s=this.userInfo)?void 0:s.avatar)||"",mobile:(null==(r=this.userInfo)?void 0:r.mobile)||"",sex:(null==(a=this.userInfo)?void 0:a.sex)||0,...e};await f.app.updateUser({data:l}),this.innerUpdateUserInfo(l)}}});const G=m({__name:"index",setup(l){const n=g(),{userInfo:i,updateUserInfo:o}=function(){const e=O();return x(()=>{e.getUserInfo()}),{loading:d(()=>e.loading),userInfo:d(()=>e.userInfo),updateUserInfo:e.updateUserInfo}}();function c(){n.push({name:"redemptionRecord"})}function p(){n.push({name:"digitalIdCard"})}function u(){n.push({name:"activityRecord"})}function f(){n.push({name:"tenantAuth"})}function m(){n.push({name:"customerService"})}function V(){n.push({name:"logout"})}async function N(){const e=await _({});e.length>0&&o({avatar:e[0].url})}const G=h(!1),R=h("");function P(){R.value=i.value.nickname||"",G.value=!0}function Z(e=!1){e?(G.value=!1,R.value=""):(o({nickname:R.value}),G.value=!1)}return(l,n)=>{const o=F,x=k,d=D,g=z,h=U,_=C,O=a,E=r,H=s,W=t,M=e,S=w("layout-tabbar-uni");return I(),b(S,null,{default:A(()=>[y(M,{"custom-class":"pt-60rpx pb-228rpx px-30rpx","background-image":v(B)},{default:A(()=>[y(x,{class:"gap-20rpx flex min-h-full flex-col"},{default:A(()=>[y(x,{class:"rounded-20rpx pt-24rpx pb-40rpx px-30rpx bg-white"},{default:A(()=>[y(x,{class:"gap-16rpx mb-36rpx flex items-end"},{default:A(()=>[y(x,{class:"w-150rpx h-120rpx relative"},{default:A(()=>{var e;return[y(o,{"custom-class":"!absolute bottom-0 right-0 rounded-full border-#fff border-4rpx border-solid overflow-hidden bg-#f3f3f3",src:null==(e=v(i))?void 0:e.avatar,width:"160rpx",height:"160rpx",mode:"aspectFill",onClick:N},null,8,["src"])]}),_:1}),y(x,{class:"gap-16rpx flex flex-grow flex-col"},{default:A(()=>[v(G)?(I(),b(x,{key:1},{default:A(()=>[y(h,{modelValue:v(R),"onUpdate:modelValue":n[2]||(n[2]=e=>j(R)?R.value=e:null)},{suffix:A(()=>[y(x,{class:"gap-12rpx inline-flex items-center"},{default:A(()=>[y(x,{class:"h-54rpx w-54rpx inline-flex items-center justify-center",onClick:n[0]||(n[0]=e=>Z(!1))},{default:A(()=>[y(g,{name:"check",size:"24rpx",color:"green"})]),_:1}),y(x,{class:"h-54rpx w-54rpx inline-flex items-center justify-center",onClick:n[1]||(n[1]=e=>Z(!0))},{default:A(()=>[y(g,{name:"close",size:"24rpx",color:"red"})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):(I(),b(x,{key:0,class:"gap-24rpx flex items-center"},{default:A(()=>{var e;return[y(d,{text:null==(e=v(i))?void 0:e.nickname,size:"36rpx","line-height":"54rpx"},null,8,["text"]),y(x,{class:"h-54rpx w-54rpx inline-flex items-center justify-center",onClick:P},{default:A(()=>[y(g,{name:"edit-1",size:"32rpx"})]),_:1})]}),_:1})),y(x,{class:"flex w-full justify-between"},{default:A(()=>{var e;return[y(d,{text:null==(e=v(i))?void 0:e.mobile,bold:!1,mode:"phone"},null,8,["text"]),y(x,{class:"border-#29A2FB80 gap-4rpx rounded-8rpx py-6rpx px-10rpx border-2rpx flex items-center border-solid"},{default:A(()=>[y(o,{src:v(J),width:"32rpx",height:"32rpx"},null,8,["src"]),y(_,{class:"text-#29A2FB leading-36rpx text-24rpx"},{default:A(()=>[T(" 已实名认证 ")]),_:1})]),_:1})]}),_:1})]),_:1})]),_:1}),y(E,{gutter:10},{default:A(()=>[y(O,{onClick:c,"custom-class":"mb-10px",span:12},{default:A(()=>[y(x,{class:"rounded-20rpx bg-#FDB27333 h-186rpx gap-12rpx flex flex-col items-center justify-center"},{default:A(()=>[y(o,{src:v("/assets/my-pythroot-QF34CJiD.png"),width:"90rpx",height:"88rpx"},null,8,["src"]),y(d,{text:"兑付记录",bold:!1,"line-height":"44rpx",size:"28rpx"})]),_:1})]),_:1}),y(O,{onClick:u,"custom-class":"mb-10px",span:12},{default:A(()=>[y(x,{class:"rounded-20rpx bg-#26D5C833 h-186rpx gap-12rpx flex flex-col items-center justify-center"},{default:A(()=>[y(o,{src:v("/assets/activity-records-CSu5nxqk.png"),width:"96rpx",height:"86rpx"},null,8,["src"]),y(d,{text:"活动记录",bold:!1,"line-height":"44rpx",size:"28rpx"})]),_:1})]),_:1}),y(O,{onClick:p,"custom-class":"mb-10px",span:12},{default:A(()=>[y(x,{class:"rounded-20rpx bg-#8AC7FF33 h-186rpx gap-12rpx flex flex-col items-center justify-center"},{default:A(()=>[y(o,{src:v(Q),width:"114rpx",height:"76rpx"},null,8,["src"]),y(d,{text:"数字身份",bold:!1,"line-height":"44rpx",size:"28rpx"})]),_:1})]),_:1}),y(O,{onClick:f,span:12},{default:A(()=>[y(x,{class:"rounded-20rpx bg-#5CBAFE33 h-186rpx gap-12rpx flex flex-col items-center justify-center"},{default:A(()=>[y(o,{src:v(Q),width:"114rpx",height:"76rpx"},null,8,["src"]),y(d,{text:"授权管理",bold:!1,"line-height":"44rpx",size:"28rpx"})]),_:1})]),_:1})]),_:1})]),_:1}),y(x,{class:"rounded-20rpx bg-white"},{default:A(()=>[y(x,{onClick:m,class:"p-36rpx gap-14rpx flex items-center"},{default:A(()=>[y(o,{src:v("data:image/png;base64,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"),width:"40rpx",height:"40rpx"},null,8,["src"]),y(d,{text:"客服咨询",bold:!1,"line-height":"44rpx"}),y(x,{class:"flex-grow"}),y(g,{name:"arrow-right",size:"40rpx",color:"#999"})]),_:1}),y(H,{class:"!my-0",dashed:"",color:"#DFE6ED"}),y(x,{onClick:V,class:"p-36rpx gap-14rpx flex items-center"},{default:A(()=>[y(o,{src:v(Y),width:"40rpx",height:"40rpx"},null,8,["src"]),y(d,{text:"设置",bold:!1,"line-height":"44rpx"}),y(x,{class:"flex-grow"}),y(g,{name:"arrow-right",size:"40rpx",color:"#999"})]),_:1})]),_:1}),y(x,{class:"flex-grow"}),y(x,{class:"flex flex-col items-center"},{default:A(()=>[y(W,{text:"浦江数链提供技术支持",color:"#999",size:"24rpx"}),y(W,{text:"沪ICP备2023032312号-1",color:"#999",size:"24rpx"})]),_:1})]),_:1})]),_:1},8,["background-image"])]),_:1})}}});export{G as default};
