import{_ as t}from"./BannerView.vue_vue_type_script_setup_true_lang.B55NZ1Jk.js";import{d as e,c as a,a as s,e as r,w as l,b as i,G as n,E as o,y as p,z as u,A as f,F as d,_ as c,H as x,B as m,r as _,af as g,M as h,N as y,O as b,t as v,P as k}from"./index-Bly4hIk5.js";import{_ as w}from"./PyTitle.Cr1dk33U.js";import{f as j}from"./index.Lf5rPU8V.js";import{u as C,_ as P}from"./usePaged.BNwJwJlH.js";import{b as B,_ as E,a as S}from"./wd-tab.Wv5vsefu.js";const I=c(e({name:"NProfitListItem",__name:"NProfitListItem",props:{avatarSrc:{default:void 0},expireTime:{default:void 0},issuer:{},pythrootList:{default:()=>[]},title:{}},emits:["extraButtonClick"],setup(t,{emit:e}){const c=e;function x(t){t.stopPropagation(),c("extraButtonClick")}return(t,e)=>{const c=n,m=r,_=w,g=o,h=d;return s(),a(m,{class:"n-profit-list-item rounded-30rpx bg-#fff relative flex"},{default:l(()=>[i(m,{class:"w-248rpx h-248rpx rounded-tl-30rpx rounded-bl-30rpx flex-shrink-0 overflow-hidden"},{default:l(()=>[i(c,{width:"100%",height:"100%",alt:"",mode:"aspectFill",src:t.avatarSrc},null,8,["src"])]),_:1}),i(m,{class:"h-248rpx w-6rpx overflow-hidden"},{default:l(()=>[i(m,{class:"dashed-divider"})]),_:1}),i(m,{class:"py-16rpx pl-28rpx pr-32rpx gap-4rpx flex flex-grow flex-col"},{default:l(()=>[i(_,{"custom-class":"!font-600 mb-12rpx",text:t.title,size:"28rpx","line-height":"normal",bold:""},null,8,["text"]),i(m,{class:"gap-2rpx pr-11rpx flex flex-col"},{default:l(()=>[i(m,{class:"gap-24rpx inline-flex"},{default:l(()=>[i(g,{"custom-class":"flex-shrink-0",text:"发行方: "}),i(m,{class:"text-container flex items-center justify-center"},{default:l(()=>[i(m,{class:"text-gradient font-500 px-18rpx rounded-24rpx bg-#29a2fb25 text-24rpx pt-0 leading-none"},{default:l(()=>[p(u(t.issuer),1)]),_:1})]),_:1})]),_:1}),i(m,{class:"gap-24rpx inline-flex"},{default:l(()=>[i(g,{"custom-class":"flex-shrink-0",text:"关联数根: "}),i(g,{"custom-class":"font-300",lines:1,text:t.pythrootList.length>0?t.pythrootList.join(" "):"无"},null,8,["text"])]),_:1}),i(m,{class:"gap-24rpx inline-flex"},{default:l(()=>[i(g,{"custom-class":"flex-shrink-0",text:"到期时间: "}),i(g,{"custom-class":"font-300",lines:1,text:`${f(j)(t.expireTime,"YYYY年MM月DD日")}`},null,8,["text"])]),_:1})]),_:1}),i(m,{class:"flex justify-end"},{default:l(()=>[i(h,{onClick:x},{default:l(()=>[p(" 去使用 ")]),_:1})]),_:1})]),_:1}),i(m,{class:"round-mask bg-#f5f5f5 w-86rpx h-86rpx absolute right-0 top-1/2 translate-x-1/2 translate-y--1/2 rounded-full"})]),_:1})}}}),[["__scopeId","data-v-e8872cd9"]]),L=e({__name:"index",setup(e){const n=x(),o=m("all"),p=[{key:"all",title:"全部"}],u=m(new Map);const{list:d}=C(async function(t){u.value.clear();const e=await k.app.getOrderPage({params:{type:2,status:0,...t}}),{code:a,data:s}=e||{};if(0!==a||!s)throw new Error("获取数据失败");const{list:r}=s;return(r||[]).forEach(t=>{const e=[];Array.isArray(t.productsIssue)&&t.productsIssue.forEach(t=>{e.push(t.name)}),void 0!==t.id&&u.value.set(t.id,e)}),s});return(e,c)=>{const x=S,m=E,k=r,w=B,j=P,C=I,L=t,N=_("layout-tabbar-uni");return s(),a(N,null,{default:l(()=>[i(L,{"custom-class":"pb-228rpx bg-#f5f5f5","banner-height":"332rpx","banner-src":f("/assets/profit-banner-so3idplw.png")},{default:l(()=>[i(k,{class:"p-28rpx bg-#f5f5f5 mt-[-30rpx] rounded-t-2xl pt-0"},{default:l(()=>[i(w,{"offset-top":-44},{default:l(()=>[i(k,{class:"mb-16rpx w-690rpx bg-#f5f5f5"},{default:l(()=>[i(k,{class:"px-20rpx bg-#f5f5f5 inline-flex"},{default:l(()=>[i(m,{modelValue:f(o),"onUpdate:modelValue":c[0]||(c[0]=t=>g(o)?o.value=t:null)},{default:l(()=>[(s(),h(y,null,b(p,t=>i(x,{key:t.key,title:`${t.title}`,name:t.key},null,8,["title","name"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(k,{class:"gap-36rpx flex flex-col"},{default:l(()=>[0===f(d).length?(s(),a(k,{key:0},{default:l(()=>[i(j)]),_:1})):v("",!0),(s(!0),h(y,null,b(f(d),(t,e)=>(s(),a(C,{color:"orange",key:e,"avatar-src":t.productSpuPicUrl,title:t.productSpuName,issuer:t.issuerName,"pythroot-list":f(u).get(t.id)||[],"expire-time":t.expireTime,onClick:e=>{return a=t.id,void n.push({name:"profitDetail",params:{id:String(a)}});var a},onExtraButtonClick:e=>{return a=t.id,void n.push({name:"profitQRCode",params:{id:String(a)}});var a}},null,8,["avatar-src","title","issuer","pythroot-list","expire-time","onClick","onExtraButtonClick"]))),128))]),_:1})]),_:1})]),_:1},8,["banner-src"])]),_:1})}}});export{L as default};
