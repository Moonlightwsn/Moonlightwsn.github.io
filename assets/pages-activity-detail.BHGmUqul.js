import{_ as t}from"./DetailView.BXi5mJjj.js";import{_ as e}from"./PyTitle.CRqKHNN_.js";import{d as a,l as r,m as l,a as i,w as s,q as n,z as o,o as p,e as c,f as d,A as u,i as x,k as v,s as f,F as m,v as y,x as g,g as b,h as k,t as w}from"./index-DaoIyQhi.js";import{p as _}from"./profit-cover.Brv83Jt1.js";import{u as h}from"./usePageOptions.wwQpX9a9.js";import{P as j}from"./index.TxoMC2Cv.js";import"./wd-tab.Cw4yMMi8.js";import"./wd-card.BcAox_dV.js";import"./wd-col.BJmA3bYW.js";import"./wd-divider.D-N7mN3Y.js";import"./wd-text.Br-nob88.js";import"./alova.esm.BwIAK7PD.js";import"./index.CqOBavWu.js";const I=a({__name:"detail",setup(a){const I=r(),P=l("静安志愿者"),D=l([{label:"活动地址",value:"PJSL20250001",icon:"location"},{label:"活动时间",value:"2025-12-15",icon:"time"}]),F=l([{key:"sponsor",title:"主办方",content:void 0},{key:"activity-profit",content:[{id:"1",avatar:_,title:"燕麦拿铁很好喝",type:2},{id:"2",avatar:_,title:"这是一杯摇摇星冰乐",type:2},{id:"1",avatar:_,title:"乌萨奇",type:1},{id:"2",avatar:_,title:"可爱的乌萨奇",type:1}],title:"活动权益"},{key:"introduce",title:"详细介绍",content:'<p><img src="http://10.1.100.13:9000/pythroot/20250909/OIP-C_1757405734487.jpg">&nbsp;</p>\n<p>乌萨奇是个可爱宝宝</p>'},{key:"register-condition",title:"报名要求",content:"<p>暂无要求</p>"}]),N=l(null);h(async t=>{var e,a,r,l,i;if(null==t?void 0:t.id)try{const{id:s}=t,n=Number.parseInt(s,10);if(Number.isNaN(n))return void I.error("无效的活动ID");const o=await j.app.getActivity({params:{id:n}});if(null==o?void 0:o.data){N.value=o.data,P.value=(null==(e=N.value)?void 0:e.name)||P.value;const t=F.value.find(t=>"sponsor"===t.key);t&&(t.content={title:N.value.sponsorName,avatar:N.value.picUrl,id:N.value.sponsorId});const s=F.value.find(t=>"activity-profit"===t.key);if(s){const t=((null==(a=N.value)?void 0:a.issueVoucher)||[]).map(t=>({id:t.id||String(Date.now()+Math.random()),avatar:t.picUrl,title:t.name||"",type:2})),e=((null==(r=N.value)?void 0:r.issueProduct)||[]).map(t=>({id:t.id||String(Date.now()+Math.random()),avatar:t.picUrl,title:t.name||"",type:1}));s.content=[...t,...e]}const n=F.value.find(t=>"register-condition"===t.key);n&&(n.content=(null==(l=N.value)?void 0:l.registerCondition)||"<p>暂无要求</p>");const p=F.value.find(t=>"introduce"===t.key);p&&(p.content=(null==(i=N.value)?void 0:i.description)||"<p>暂无详细介绍</p>")}else N.value=null,I.info("没有获取到权益详情")}catch(s){console.error("获取活动详情失败:",s),I.error("获取活动详情失败，请稍后重试")}else I.error("缺少活动ID参数")});const A=()=>{N.value?I.success("签到成功"):I.warning("活动数据未加载完成")};return(a,r)=>{const l=v,_=x,h=e,j=g,I=b,N=t,C=n("layout-default-uni"),O=o("dompurify-html");return p(),i(C,null,{default:s(()=>[c(N,{"card-title":P.value,"card-info":D.value,sections:F.value,"is-show-btn":!0,"extra-button-text":"签到参与",onOnclick:A},{"section-content":s(({sectionItem:t})=>["sponsor"===t.key?(p(),i(_,{key:0,class:"gap-20rpx mt-8rpx flex flex-col"},{default:s(()=>[c(_,{class:"rounded-20rpx p-20rpx gap-18rpx b-2rpx b-[rgba(255,146,88,0.2)] flex items-center"},{default:s(()=>[c(_,{class:"w-96rpx h-96rpx bg-#F3F3F5 flex-shrink-0 overflow-hidden rounded-full"},{default:s(()=>[c(l,{width:"100%",height:"100%","rounded-full":"",alt:"主办方图片",src:t.content.avatar,"object-fit":"cover"},null,8,["src"])]),_:2},1024),c(h,{text:t.content.title},null,8,["text"])]),_:2},1024)]),_:2},1024)):d("",!0),"activity-profit"===t.key?(p(),i(_,{key:1},{default:s(()=>[(p(!0),f(m,null,y(t.content,t=>(p(),i(_,{key:t.id,class:"rounded-20rpx p-10rpx gap-18rpx b-2rpx b-[rgba(255,146,88,0.2)] flex items-center"},{default:s(()=>[1===t.type?(p(),i(_,{key:0,class:"mb-16rpx flex items-center"},{default:s(()=>[c(j,{class:"w-32rpx h-32rpx mr-12rpx",src:t.avatar},null,8,["src"]),c(I,{class:"text-28rpx text-[#666]"},{default:s(()=>[k("可领数根：")]),_:1}),c(_,{class:"px-16rpx py-8rpx text-28rpx rounded-full bg-blue-50 text-blue-400"},{default:s(()=>[k(w(t.title),1)]),_:2},1024)]),_:2},1024)):d("",!0),2===t.type?(p(),i(_,{key:1,class:"mb-16rpx flex items-center"},{default:s(()=>[c(j,{class:"w-32rpx h-32rpx mr-12rpx",src:t.avatar},null,8,["src"]),c(I,{class:"text-28rpx text-[#666]"},{default:s(()=>[k("可领权益：")]),_:1}),c(_,{class:"px-16rpx py-8rpx text-28rpx rounded-full bg-orange-50 text-orange-400"},{default:s(()=>[k(w(t.title),1)]),_:2},1024)]),_:2},1024)):d("",!0)]),_:2},1024))),128))]),_:2},1024)):d("",!0),"introduce"===t.key||"register-condition"===t.key?u((p(),i(_,{key:2},null,512)),[[O,t.content]]):d("",!0)]),_:1},8,["card-title","card-info","sections"])]),_:1})}}});export{I as default};
