import{_ as t,a as s}from"./activity-cover.rsNa2DSu.js";import{u as i,_ as e}from"./usePaged.D5bXF0nA.js";import{d as r,c as a,w as o,r as n,a as u,b as l,e as p,t as c,L as d,A as m,M as v,N as f,P as h}from"./index-Bpal6X9u.js";import"./wd-card.-vo_KsXs.js";import"./wd-divider.Cc4zUyyv.js";import"./PyText.vue_vue_type_script_setup_true_lang.1L9IIHvr.js";import"./wd-text.COOnfa1A.js";import"./PyTitle.Dn6RlDza.js";import"./index.DM5hYbMc.js";const y=r({__name:"record",setup(r){const y=t=>({id:(null==t?void 0:t.id)||Date.now().toString(),img:(null==t?void 0:t.picUrl)||"/assets/pythroot-cover-DrifrCw4.png",title:(null==t?void 0:t.name)||"未命名数根"}),g=t=>{const s=[];t.issueProduct&&(Array.isArray(t.issueProduct)?s.push(...t.issueProduct.map(t=>y(t))):s.push(y(t.issueProduct)));const i=[];var e;t.issueVoucher&&(Array.isArray(t.issueVoucher)?i.push(...t.issueVoucher.map(t=>y(t))):i.push({id:(null==(e=t.issueVoucher)?void 0:e.id)||Date.now().toString(),img:(null==e?void 0:e.picUrl)||"/assets/profit-cover-DT0GkUSG.png",title:(null==e?void 0:e.name)||"未命名权益"}));const r=[];return t.attendedUsers&&t.attendedUsers.forEach(t=>{r.push((t=>({avatar:null==t?void 0:t.avatar}))(t))}),{...t,pythrootList:s,profitList:i,participants:r}};const{list:_}=i(async function(t){const s=await h.app.getActivityAttendancePage({params:{...t}}),{code:i,data:e}=s||{};if(0!==i||!e)throw new Error("获取数据失败");console.log("data",e);const r=(e.list||[]).map(t=>g(t));return console.log(r),{list:r,total:e.total||0}});return(i,r)=>{const h=e,y=p,g=t,w=n("layout-default-uni");return u(),a(w,null,{default:o(()=>[l(y,{class:"px-30rpx py-40rpx gap-20rpx flex min-h-screen flex-col bg-white"},{default:o(()=>[0===m(_).length?(u(),a(y,{key:0},{default:o(()=>[l(h)]),_:1})):c("",!0),(u(!0),d(v,null,f(m(_),t=>(u(),a(g,{key:t.id,border:!0,"cover-img-src":t.picUrl||m(s),title:t.name,location:t.address||"","start-time":t.createTime,"end-time":t.endTime,participants:t.participants,"pythroot-list":t.pythrootList,"profit-list":t.profitList,status:t.timeStatus,"time-status":t.timeStatus},null,8,["cover-img-src","title","location","start-time","end-time","participants","pythroot-list","profit-list","status","time-status"]))),128))]),_:1})]),_:1})}}});export{y as default};
