import{_ as e}from"./BgView.3W1-t8J-.js";import{ac as t,I as s,ad as r,ae as a,J as l,D as n,W as i,$ as o,Z as c,p,d as u,H as f,B as x,c as d,w as m,r as h,a as g,b,A,e as w,G as I,v as y,a9 as v,af as k,x as z,y as F,E as U}from"./index-Bly4hIk5.js";import{_ as j}from"./wd-divider.DmdDC7_O.js";import{_ as C,a as D}from"./wd-col.CCMEXLTH.js";import{_ as T}from"./PyTitle.Cr1dk33U.js";import{p as B,s as J,a as Q}from"./page-bg-3.BQUenM3F.js";const V="/assets/digital-id-DnfwsGFg.png",Y=(e,t="")=>{s({title:"上传中"});const i=r();return new Promise(s=>{a({url:"https://test-stub.chainable.com.cn:16380/app-api/infra/file/upload",filePath:e,name:"file",header:{Accept:"*/*",Authorization:`Bearer ${i.value}`},formData:{directory:t},success:e=>{const t=JSON.parse(e.data);if(1!==t.error)return s(t);n({icon:"none",title:t.msg})},fail:e=>(console.log("上传失败：",e),s(!1)),complete:()=>{l()}})})};function N(e){const{count:s,sizeType:r=["original","compressed"],sourceType:a=["album","camera"],extension:l}=e;return new Promise((e,n)=>{t({count:s,sizeType:r,sourceType:a,extension:l,success(t){e(function(e,t){return e.tempFiles.forEach((e,s)=>{e.name||(e.name=e.path.slice(Math.max(0,e.path.lastIndexOf("/")+1))),e.fileType=t,e.cloudPath=`${Date.now()}_${s}${e.name.slice(Math.max(0,e.name.lastIndexOf(".")))}`}),e.tempFilePaths||(e.tempFilePaths=e.tempFiles.map(e=>e.path)),e}(t,"image"))},fail(e){const t=e.errMsg.replace("chooseImage:fail","chooseAndUploadFile:fail");n(new Error(t))}})})}function O(e){const t=e||{directory:void 0};return async function(e,{onChooseFile:t,directory:s}){const r=await e;let a=r.tempFiles||[];if(t){const e=t(r);void 0!==e&&(a=await Promise.resolve(e),void 0===a&&(a=r.tempFiles||[]))}for(const l of a){const{data:e}=await Y(l.path,s)||{};l.url=e}return a}(N(t),t)}const E=i("profile",{state:()=>({loading:!1,userInfo:{nickname:"",avatar:"",mobile:""}}),actions:{innerUpdateUserInfo(e){this.userInfo.nickname=e.nickname,this.userInfo.avatar=e.avatar,this.userInfo.mobile=e.mobile,this.userInfo.sex=e.sex},async getUserInfo(){this.loading=!0;try{const e=await o.app.getUserInfo();(null==e?void 0:e.data)&&this.innerUpdateUserInfo(e.data)}finally{this.loading=!1}},async updateUserInfo(e){var t,s,r,a;const l={nickname:(null==(t=this.userInfo)?void 0:t.nickname)||"",avatar:(null==(s=this.userInfo)?void 0:s.avatar)||"",mobile:(null==(r=this.userInfo)?void 0:r.mobile)||"",sex:(null==(a=this.userInfo)?void 0:a.sex)||0,...e};await o.app.updateUser({data:l}),this.innerUpdateUserInfo(l)}}});const G=u({__name:"index",setup(t){const s=f(),{userInfo:r,updateUserInfo:a}=function(){const e=E();return c(()=>{e.getUserInfo()}),{loading:p(()=>e.loading),userInfo:p(()=>e.userInfo),updateUserInfo:e.updateUserInfo}}();function l(){s.push({name:"redemptionRecord"})}function n(){s.push({name:"digitalIdCard"})}function i(){s.push({name:"activityRecord"})}function o(){s.push({name:"tenantAuth"})}function u(){s.push({name:"customerService"})}function Y(){s.push({name:"logout"})}async function N(){const e=await O({});e.length>0&&a({avatar:e[0].url})}const G=x(!1),R=x("");function Z(){R.value=r.value.nickname||"",G.value=!0}function P(e=!1){e?(G.value=!1,R.value=""):(a({nickname:R.value}),G.value=!1)}return(t,s)=>{const a=I,c=w,p=T,f=y,x=v,O=z,E=D,W=C,H=j,M=U,_=e,q=h("layout-tabbar-uni");return g(),d(q,null,{default:m(()=>[b(_,{"custom-class":"pt-60rpx pb-228rpx px-30rpx","background-image":A(B)},{default:m(()=>[b(c,{class:"gap-20rpx flex min-h-full flex-col"},{default:m(()=>[b(c,{class:"rounded-20rpx pt-24rpx pb-40rpx px-30rpx bg-white"},{default:m(()=>[b(c,{class:"gap-16rpx mb-36rpx flex items-end"},{default:m(()=>[b(c,{class:"w-150rpx h-120rpx relative"},{default:m(()=>{var e;return[b(a,{"custom-class":"!absolute bottom-0 right-0 rounded-full border-#fff border-4rpx border-solid overflow-hidden bg-#f3f3f3",src:null==(e=A(r))?void 0:e.avatar,width:"160rpx",height:"160rpx",mode:"aspectFill",onClick:N},null,8,["src"])]}),_:1}),b(c,{class:"gap-16rpx flex flex-grow flex-col"},{default:m(()=>[A(G)?(g(),d(c,{key:1},{default:m(()=>[b(x,{modelValue:A(R),"onUpdate:modelValue":s[2]||(s[2]=e=>k(R)?R.value=e:null)},{suffix:m(()=>[b(c,{class:"gap-12rpx inline-flex items-center"},{default:m(()=>[b(c,{class:"h-54rpx w-54rpx inline-flex items-center justify-center",onClick:s[0]||(s[0]=e=>P(!1))},{default:m(()=>[b(f,{name:"check",size:"24rpx",color:"green"})]),_:1}),b(c,{class:"h-54rpx w-54rpx inline-flex items-center justify-center",onClick:s[1]||(s[1]=e=>P(!0))},{default:m(()=>[b(f,{name:"close",size:"24rpx",color:"red"})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):(g(),d(c,{key:0,class:"gap-24rpx flex items-center"},{default:m(()=>{var e;return[b(p,{text:null==(e=A(r))?void 0:e.nickname,size:"36rpx","line-height":"54rpx"},null,8,["text"]),b(c,{class:"h-54rpx w-54rpx inline-flex items-center justify-center",onClick:Z},{default:m(()=>[b(f,{name:"edit-1",size:"32rpx"})]),_:1})]}),_:1})),b(c,{class:"flex w-full justify-between"},{default:m(()=>{var e;return[b(p,{text:null==(e=A(r))?void 0:e.mobile,bold:!1,mode:"phone"},null,8,["text"]),b(c,{class:"border-#29A2FB80 gap-4rpx rounded-8rpx py-6rpx px-10rpx border-2rpx flex items-center border-solid"},{default:m(()=>[b(a,{src:A(J),width:"32rpx",height:"32rpx"},null,8,["src"]),b(O,{class:"text-#29A2FB leading-36rpx text-24rpx"},{default:m(()=>[F(" 已实名认证 ")]),_:1})]),_:1})]}),_:1})]),_:1})]),_:1}),b(W,{gutter:10},{default:m(()=>[b(E,{onClick:l,"custom-class":"mb-10px",span:12},{default:m(()=>[b(c,{class:"rounded-20rpx bg-#FDB27333 h-186rpx gap-12rpx flex flex-col items-center justify-center"},{default:m(()=>[b(a,{src:A("/assets/my-pythroot-QF34CJiD.png"),width:"90rpx",height:"88rpx"},null,8,["src"]),b(p,{text:"兑付记录",bold:!1,"line-height":"44rpx",size:"28rpx"})]),_:1})]),_:1}),b(E,{onClick:i,"custom-class":"mb-10px",span:12},{default:m(()=>[b(c,{class:"rounded-20rpx bg-#26D5C833 h-186rpx gap-12rpx flex flex-col items-center justify-center"},{default:m(()=>[b(a,{src:A("/assets/activity-records-CSu5nxqk.png"),width:"96rpx",height:"86rpx"},null,8,["src"]),b(p,{text:"活动记录",bold:!1,"line-height":"44rpx",size:"28rpx"})]),_:1})]),_:1}),b(E,{onClick:n,"custom-class":"mb-10px",span:12},{default:m(()=>[b(c,{class:"rounded-20rpx bg-#8AC7FF33 h-186rpx gap-12rpx flex flex-col items-center justify-center"},{default:m(()=>[b(a,{src:A(V),width:"114rpx",height:"76rpx"},null,8,["src"]),b(p,{text:"数字身份",bold:!1,"line-height":"44rpx",size:"28rpx"})]),_:1})]),_:1}),b(E,{onClick:o,span:12},{default:m(()=>[b(c,{class:"rounded-20rpx bg-#5CBAFE33 h-186rpx gap-12rpx flex flex-col items-center justify-center"},{default:m(()=>[b(a,{src:A(V),width:"114rpx",height:"76rpx"},null,8,["src"]),b(p,{text:"授权管理",bold:!1,"line-height":"44rpx",size:"28rpx"})]),_:1})]),_:1})]),_:1})]),_:1}),b(c,{class:"rounded-20rpx bg-white"},{default:m(()=>[b(c,{onClick:u,class:"p-36rpx gap-14rpx flex items-center"},{default:m(()=>[b(a,{src:A("data:image/png;base64,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"),width:"40rpx",height:"40rpx"},null,8,["src"]),b(p,{text:"客服咨询",bold:!1,"line-height":"44rpx"}),b(c,{class:"flex-grow"}),b(f,{name:"arrow-right",size:"40rpx",color:"#999"})]),_:1}),b(H,{class:"!my-0",dashed:"",color:"#DFE6ED"}),b(c,{onClick:Y,class:"p-36rpx gap-14rpx flex items-center"},{default:m(()=>[b(a,{src:A(Q),width:"40rpx",height:"40rpx"},null,8,["src"]),b(p,{text:"设置",bold:!1,"line-height":"44rpx"}),b(c,{class:"flex-grow"}),b(f,{name:"arrow-right",size:"40rpx",color:"#999"})]),_:1})]),_:1}),b(c,{class:"flex-grow"}),b(c,{class:"flex flex-col items-center"},{default:m(()=>[b(M,{text:"浦江数链提供技术支持",color:"#999",size:"24rpx"}),b(M,{text:"沪ICP备2023032312号-1",color:"#999",size:"24rpx"})]),_:1})]),_:1})]),_:1},8,["background-image"])]),_:1})}}});export{G as default};
