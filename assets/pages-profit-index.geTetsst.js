import{_ as t,a,b as e}from"./wd-tab.p6-T75NT.js";import{d as l,c as r,a as s,o,i,n,b as u,u as d,w as c,e as p,r as x,f,g as m,h,t as v,_ as g,j as _,k as y,l as b,H as k,m as C,p as w,q as j,s as $,F as B,v as I}from"./index-CQJqgjxr.js";import{_ as P,a as S}from"./PyTitle.DFOzHodd.js";import{p as T}from"./profit-cover.Brv83Jt1.js";import{P as W}from"./index.CYBLn4NN.js";import"./wd-text.Bc2ux5Th.js";import"./alova.esm.BwIAK7PD.js";import"./index.DEKZD6wB.js";const E=_(l({options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},__name:"Coupon",props:{color:{default:"orange"},customClass:{default:""},extraButtonText:{default:"去使用"},extraText:{default:""},extraWidth:{default:"190rpx"}},emits:["extraButtonClick"],setup(t,{emit:a}){const e=t,l=a,_=r(()=>`radial-gradient(circle at calc(100% - ${e.extraWidth}) 0, transparent 12rpx, red 0) top / 100% 51% no-repeat, radial-gradient(circle at calc(100% - ${e.extraWidth}) 100%, transparent 12rpx, red 0) bottom / 100% 51% no-repeat`);function y(t){t.stopPropagation(),l("extraButtonClick")}return(t,a)=>{const e=i,l=m,r=g;return o(),s(e,{class:u(`coupon flex cursor-pointer overflow-hidden ${t.color} ${t.customClass}`),style:n({mask:d(_)})},{default:c(()=>[p(e,{class:"b-r-none b-2rpx b-solid flex-grow rounded-l-xl border-[var(--coupon-border-color)]"},{default:c(()=>[x(t.$slots,"default",{},void 0,!0)]),_:3}),p(e,{class:"b-2rpx b-dashed gap-20rpx coupon-extra relative flex flex-shrink-0 flex-col items-center justify-center rounded-r-xl border-[var(--coupon-border-color)] bg-[var(--coupon-bg-color)]",style:n({width:t.extraWidth})},{default:c(()=>[x(t.$slots,"extra",{},()=>[t.extraText?(o(),s(l,{key:0,class:"text-[var(--coupon-color)]"},{default:c(()=>[h(v(t.extraText),1)]),_:1})):f("",!0),p(r,{onClick:y},{default:c(()=>[h(v(t.extraButtonText),1)]),_:1})],!0)]),_:3},8,["style"])]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-7902a6d3"]]),L=l({options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},name:"ProfitListItem",__name:"ProfitListItem",props:{avatarSrc:{default:""},color:{default:"orange"},customClass:{default:""},extraWidth:{default:"190rpx"},issuer:{},pythrootList:{default:()=>[]},title:{}},emits:["extraButtonClick"],setup:t=>(t,a)=>{const e=y,l=i,r=P,n=S,u=E;return o(),s(u,{color:t.color,"custom-class":t.customClass,"extra-width":t.extraWidth,onExtraButtonClick:a[0]||(a[0]=a=>t.$emit("extraButtonClick"))},{default:c(()=>[p(l,{class:"p-20rpx gap-22rpx h-256rpx flex items-start"},{default:c(()=>[p(l,{class:"w-96rpx h-96rpx rounded-8rpx p-16rpx bg-#F3F3F5 flex-shrink-0"},{default:c(()=>[p(e,{width:"100%",height:"100%",round:"",radius:"10rpx",alt:"",src:t.avatarSrc},null,8,["src"])]),_:1}),p(l,{class:"gap-10rpx mr-12rpx flex flex-grow flex-col"},{default:c(()=>[p(l,null,{default:c(()=>[p(r,{lines:2,text:t.title},null,8,["text"])]),_:1}),p(l,{class:"gap-4rpx flex flex-col"},{default:c(()=>[p(n,{text:`发行方: ${t.issuer}`},null,8,["text"]),p(n,{text:`关联数根: ${t.pythrootList.length>0?t.pythrootList.join(" "):"无"}`},null,8,["text"]),p(n,{text:"到期时间: 2025-09-30"})]),_:1})]),_:1})]),_:1})]),_:1},8,["color","custom-class","extra-width"])}}),F=l({__name:"index",setup(l){const r=b(),n=k(),u=C([]),x=C(new Map);w(async()=>{var t;console.log("权益页");try{const a=await W.app.getOrderPage({params:{type:2,pageNo:1,pageSize:20}});(null==(t=null==a?void 0:a.data)?void 0:t.list)&&a.data.list.length>0?(console.log(a.data.list),u.value=a.data.list,x.value.clear(),u.value.forEach(t=>{console.log(t);const a=[];Array.isArray(t.productsIssue)&&t.productsIssue.forEach(t=>{a.push(t.name)}),void 0!==t.id&&x.value.set(t.id,a)}),console.log(x)):(u.value=[],x.value.clear(),r.info("没有获取到权益数据"))}catch(a){r.error(`获取权益数据失败：${a}`),u.value=[],x.value.clear()}});const m=C("all"),v=[{key:"all",title:"全部"}];return(l,r)=>{const g=e,_=a,y=i,b=L,k=t,C=j("layout-tabbar-uni");return o(),s(C,null,{default:c(()=>[p(k,{"banner-height":"332rpx","banner-src":d("/assets/profit-banner-so3idplw.png")},{default:c(()=>[p(y,{class:"p-30rpx translate-y-[-30rpx] rounded-t-2xl bg-white pt-0"},{default:c(()=>[p(y,{class:"px-20rpx inline-flex"},{default:c(()=>[p(_,{modelValue:m.value,"onUpdate:modelValue":r[0]||(r[0]=t=>m.value=t),class:"mb-16rpx"},{default:c(()=>[(o(),$(B,null,I(v,t=>p(g,{key:t.key,title:`${t.title}`},null,8,["title"])),64))]),_:1},8,["modelValue"])]),_:1}),p(y,{class:"gap-20rpx flex flex-col"},{default:c(()=>[0===u.value.length?(o(),s(y,{key:0,class:"py-40rpx text-center"},{default:c(()=>[h(" 暂无权益数据 ")]),_:1})):f("",!0),(o(!0),$(B,null,I(u.value,(t,a)=>(o(),s(b,{color:"blue",key:a,"avatar-src":t.productSpuPicUrl||d(T),title:t.productSpuName,issuer:t.issuerName,"pythroot-list":x.value.get(t.id)||[],onClick:a=>{return e=t.id,void n.push({name:"profitDetail",params:{id:String(e)}});var e},onExtraButtonClick:a=>{return e=t.id,void n.push({name:"profitQRCode",params:{id:String(e)}});var e}},null,8,["avatar-src","title","issuer","pythroot-list","onClick","onExtraButtonClick"]))),128))]),_:1})]),_:1})]),_:1},8,["banner-src"])]),_:1})}}});export{F as default};
