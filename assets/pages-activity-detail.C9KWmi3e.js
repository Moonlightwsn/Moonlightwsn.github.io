import{d as e,H as t,B as a,p as i,c as r,w as n,r as l,D as s,K as o,a as u,b as c,A as p,t as d,L as A,e as x,G as f,E as v,M as g,N as h,O as y,n as b,y as m,z as B,v as I,P as k,_ as w}from"./index-Bly4hIk5.js";import{_ as S}from"./DetailView.CoAPIWzO.js";import{_ as j}from"./PyTitle.Cr1dk33U.js";import{_ as C}from"./PythrootChainSlogan.vue_vue_type_script_setup_true_lang.DBgWt83W.js";import{u as P}from"./usePageOptions.C6-2XX9Y.js";import{f as L}from"./index.Lf5rPU8V.js";import"./BannerView.vue_vue_type_script_setup_true_lang.B55NZ1Jk.js";import"./wd-tab.Wv5vsefu.js";import"./wd-card.BfjIy9EC.js";import"./Descriptions.vue_vue_type_script_setup_true_lang.Bu1yKr76.js";import"./wd-col.CCMEXLTH.js";import"./wd-divider.DmdDC7_O.js";const F=w(e({__name:"detail",setup(e){const w=t(),F=a(""),U=a([{label:"活动地址",value:"",icon:"location"},{label:"活动时间",value:"",icon:"time"}]),E=a([{key:"sponsor",title:"主办方信息",content:void 0},{key:"activity-profit",content:[],title:"活动权益"},{key:"introduce",title:"详细介绍",content:""}]),K=a(null),M=a(!1),X=a(),D=i(()=>{var e;if("boolean"!=typeof X.value)return"";if(X.value)return"已参与";const t=Number(null==(e=K.value)?void 0:e.type);return 0===t?"线下扫码":1===t?"签到参与":2===t?"立即领取":""}),q=async()=>{var e;if(!(null==(e=K.value)?void 0:e.id))return void s({icon:"error",title:"活动数据未加载完成"});const{id:t,type:a}=K.value;switch(a){case 0:w.push({name:"scanClientNext"});break;case 1:w.push({name:"activityAttendance",params:{id:String(t)}});break;case 2:{M.value=!0;const e=await k.app.createActivityAttendance({data:{activityId:K.value.id}}).finally(()=>M.value=!1);0===(null==e?void 0:e.code)&&(s({icon:"success",title:"签到成功"}),X.value=!0);break}}};function Q(e,t){console.log(e,t)}return P(async e=>{if(null==e?void 0:e.id)try{const{id:t}=e,a=Number.parseInt(t,10);Number.isNaN(a)&&s({icon:"error",title:"无效的活动ID"}),async function(e){var t,a,i,r,n;const l=await k.app.getActivity({params:{id:e}});if(null==l?void 0:l.data){K.value=l.data,F.value=(null==(t=K.value)?void 0:t.name)||F.value;const{startTime:e,endTime:s,address:o}=l.data,u="YYYY年MM月DD日";U.value[0].value=o||"-",U.value[1].value=`${L(e,u)} - ${L(s,u)}`;const c=E.value.find(e=>"sponsor"===e.key);c&&(c.content={title:K.value.sponsorName,avatar:K.value.picUrl,id:K.value.sponsorId});const p=E.value.find(e=>"activity-profit"===e.key);if(p){const e=((null==(a=K.value)?void 0:a.issueVoucher)||[]).map(e=>({id:e.id||String(Date.now()+Math.random()),avatar:e.picUrl,title:e.name||"",type:2})),t=((null==(i=K.value)?void 0:i.issueProduct)||[]).map(e=>({id:e.id||String(Date.now()+Math.random()),avatar:e.picUrl,title:e.name||"",type:1}));p.content=[...t,...e]}const d=E.value.find(e=>"register-condition"===e.key);d&&(d.content=(null==(r=K.value)?void 0:r.registerCondition)||"<p>暂无要求</p>");const A=E.value.find(e=>"introduce"===e.key);A&&(A.content=(null==(n=K.value)?void 0:n.description)||"<p>暂无详细介绍</p>")}else K.value=null,s({icon:"error",title:"没有获取到权益详情"})}(a),async function(e){const t=await k.app.checkActivityAttended({params:{activityId:e}});0===(null==t?void 0:t.code)&&(X.value=t.data||!1)}(a)}catch(t){console.error("获取活动详情失败:",t),s({icon:"error",title:"获取活动详情失败，请稍后重试"})}}),(e,t)=>{const a=C,i=I,s=x,k=v,w=f,P=j,L=S,K=l("layout-default-uni"),T=o("dompurify-html");return u(),r(K,null,{default:n(()=>[c(L,{"card-title":F.value,"card-info":U.value,sections:E.value,"banner-src":p("/assets/activity-detail-banner-DEYrLLOL.png"),"extra-button-text":p(D),"is-btn-show":Boolean(p(D)),"extra-button-props":{loading:M.value,disabled:X.value,type:X.value?"info":"primary"},"banner-height":"420rpx","card-offset":"-80rpx",onOnclick:q},{"banner-front":n(()=>[c(a,{background:"linear-gradient( 90deg, #00FFB2 0%, #AA50FF 50%, #FF7070 100%);"})]),"card-label":n(({item:e})=>[c(s,{class:"gap-20rpx inline-flex items-center"},{default:n(()=>[c(s,{class:"w-36rpx h-36rpx inline-flex items-center justify-center"},{default:n(()=>[c(i,{name:e.icon,size:"location"===e.icon?"36rpx":"28rpx"},null,8,["name","size"])]),_:2},1024),c(k,{text:e.label},null,8,["text"])]),_:2},1024)]),"section-content":n(({sectionItem:e})=>["sponsor"===e.key?(u(),r(s,{key:0,class:"gap-20rpx mt-8rpx flex flex-col"},{default:n(()=>[c(s,{class:"rounded-20rpx p-20rpx gap-18rpx b-2rpx b-[rgba(255,146,88,0.2)] flex items-center"},{default:n(()=>{var t;return[c(s,{class:"w-96rpx h-96rpx bg-#F3F3F5 flex-shrink-0 overflow-hidden rounded-full"},{default:n(()=>{var t;return[c(w,{width:"100%",height:"100%","rounded-full":"",alt:"主办方图片",src:null==(t=e.content)?void 0:t.avatar,mode:"aspectFill"},null,8,["src"])]}),_:2},1024),c(P,{text:null==(t=e.content)?void 0:t.title},null,8,["text"])]}),_:2},1024)]),_:2},1024)):d("",!0),"activity-profit"===e.key?(u(),r(s,{key:1},{default:n(()=>[c(s,{class:"rounded-20rpx p-10rpx gap-18rpx b-2rpx b-[rgba(255,146,88,0.2)] flex items-center"},{default:n(()=>[c(s,{class:"mb-16rpx gap-12rpx flex items-start"},{default:n(()=>[c(s,{class:"pt-12rpx flex flex-shrink-0 items-center"},{default:n(()=>[c(w,{width:"32rpx",height:"32rpx",class:"mr-12rpx",src:p("data:image/png;base64,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")},null,8,["src"]),c(k,{text:"可领数根：","line-height":"38rpx"})]),_:1}),c(s,{class:"gap-8rpx flex flex-wrap"},{default:n(()=>[(u(!0),g(h,null,y((e.content||[]).filter(e=>1===e.type&&e.title),e=>(u(),r(s,{class:"px-40rpx pt-12rpx pb-10rpx text-28rpx bg-#29A2FB1A leading-38rpx rounded-full",key:e.id,onClick:t=>Q(e.id,"pythroot")},{default:n(()=>[c(s,{class:"linear-gradient-text",style:b({background:"linear-gradient(90deg, #09DAFF 0%, #29A2FB 100%)"})},{default:n(()=>[m(B(e.title),1)]),_:2},1032,["style"])]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024),c(s,{class:"rounded-20rpx p-10rpx gap-18rpx b-2rpx b-[rgba(255,146,88,0.2)] flex items-center"},{default:n(()=>[c(s,{class:"mb-16rpx gap-12rpx flex items-start"},{default:n(()=>[c(s,{class:"pt-12rpx flex flex-shrink-0 items-center"},{default:n(()=>[c(w,{width:"32rpx",height:"32rpx",class:"mr-12rpx",src:p("data:image/png;base64,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")},null,8,["src"]),c(k,{text:"可领权益：","line-height":"38rpx"})]),_:1}),c(s,{class:"gap-8rpx flex flex-wrap"},{default:n(()=>[(u(!0),g(h,null,y((e.content||[]).filter(e=>2===e.type&&e.title),e=>(u(),r(s,{class:"px-40rpx pt-12rpx pb-10rpx text-28rpx bg-#FF6A001A leading-38rpx rounded-full",key:e.id,onClick:t=>Q(e.id,"profit")},{default:n(()=>[c(s,{class:"linear-gradient-text",style:b({background:"linear-gradient(90deg, #FFAE00 0%, #FF6A00 100%)"})},{default:n(()=>[m(B(e.title),1)]),_:2},1032,["style"])]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):d("",!0),"introduce"===e.key||"register-condition"===e.key?A((u(),r(s,{key:2},null,512)),[[T,e.content]]):d("",!0)]),_:1},8,["card-title","card-info","sections","banner-src","extra-button-text","is-btn-show","extra-button-props"])]),_:1})}}}),[["__scopeId","data-v-bb96ae7b"]]);export{F as default};
