import{d as e,H as a,B as t,c as r,w as s,r as l,P as i,C as n,I as o,a as u,b as c,A as p,t as d,J as v,e as m,K as x,L as f,M as _,E as y,D as b,y as h}from"./index-DbmF-9aG.js";import{_ as k}from"./DetailView.DLNhCmXG.js";import{_ as w}from"./PyTitle.Cj1MO8gs.js";import{o as g}from"./on-chain.ItkuIJXP.js";import{u as j}from"./usePageOptions.BTEaFE2L.js";import{f as D}from"./index.3w_ZffHZ.js";import"./BannerView.vue_vue_type_script_setup_true_lang.CrW26RPs.js";import"./wd-tab.D3RTcKln.js";import"./wd-card.CPkgHGk0.js";import"./Descriptions.vue_vue_type_script_setup_true_lang.BSFJU2oD.js";import"./wd-col.nhNhd-CI.js";import"./PyText.vue_vue_type_script_setup_true_lang.B4U5MSzJ.js";import"./wd-text.Qyj5H_OV.js";import"./wd-divider.DQmw5Zxo.js";const S=e({__name:"detail",setup(e){const S=a(),I=t(),N=t(""),T=t([{label:"权益编号",value:""},{label:"到期日期",value:""},{label:"发放方",value:""},{label:"发放日期",value:""}]),F=t([{key:"associated-pythroot",title:"关联数根",content:[]},{key:"introduce",title:"详细介绍",content:""}]),P=t();function B(){S.push({name:"evidence",params:{type:"2",id:String(I.value)}})}return j(async e=>{var a,t,r;const{id:s}=e||{};I.value=Number(s);const l=await i.app.getOrderDetail({params:{orderId:I.value}});if(null==l?void 0:l.data){P.value=l.data,N.value=null==(a=P.value)?void 0:a.productSpuName,T.value.forEach(e=>{var a,t,r,s;switch(e.label){case"到期日期":e.value=D(null==(a=P.value)?void 0:a.expireTime);break;case"发放方":e.value=(null==(t=P.value)?void 0:t.issuerName)||"未知发放方";break;case"发放日期":e.value=D(null==(r=P.value)?void 0:r.createTime);break;case"权益编号":e.value=(null==(s=P.value)?void 0:s.productSpuNo)||""}});const e=(null==(t=P.value)?void 0:t.productsIssue)||[];F.value.find(e=>"associated-pythroot"===e.key).content=e.map(e=>({id:e.id||String(Date.now()+Math.random()),avatar:e.picUrl,title:e.name||""}));const s=F.value.find(e=>"introduce"===e.key);s&&(s.content=(null==(r=P.value)?void 0:r.productSpuDescription)||"<p>暂无详细介绍</p>")}else P.value=void 0,n({icon:"error",title:"没有获取到权益详情"})}),(e,a)=>{const t=y,i=b,n=m,j=w,D=k,S=l("layout-default-uni"),I=o("dompurify-html");return u(),r(S,null,{default:s(()=>[c(D,{"card-title":p(N),"card-info":p(T),sections:p(F),"is-show-btn":!0,"banner-src":p("/assets/activity-banner-C3YHyT4s.png"),"banner-height":"364rpx","card-offset":"-200rpx"},{"card-content-extra":s(()=>{var e;return[1===Number(null==(e=p(P))?void 0:e.chainStatus)?(u(),r(i,{key:0,class:"mt-20rpx",block:"",plain:"",onClick:B},{default:s(()=>[c(t,{class:"mr-10rpx",width:"24rpx",height:"24rpx",src:p(g)},null,8,["src"]),h("链上信息 ")]),_:1})):d("",!0)]}),"section-content":s(({sectionItem:e})=>["associated-pythroot"===e.key?(u(),r(n,{key:0,class:"gap-20rpx mt-8rpx flex flex-col"},{default:s(()=>[(u(!0),x(f,null,_(e.content,e=>(u(),r(n,{key:e.id,class:"rounded-20rpx p-20rpx gap-18rpx b-2rpx b-[rgba(41,162,251,0.4)] flex items-center border-solid"},{default:s(()=>[c(n,{class:"w-96rpx h-96rpx rounded-8rpx p-16rpx bg-#F3F3F5 flex-shrink-0"},{default:s(()=>[c(t,{width:"100%",height:"100%",round:"",radius:"10rpx",alt:"",src:e.avatar},null,8,["src"])]),_:2},1024),c(j,{text:e.title},null,8,["text"])]),_:2},1024))),128))]),_:2},1024)):d("",!0),"introduce"===e.key?v((u(),r(n,{key:1},null,512)),[[I,e.content]]):d("",!0)]),_:1},8,["card-title","card-info","sections","banner-src"])]),_:1})}}});export{S as default};
