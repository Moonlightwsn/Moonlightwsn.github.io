import{d as e,H as t,B as a,c as r,w as s,r as l,P as n,C as i,I as o,a as u,b as p,A as c,t as d,J as v,e as m,K as _,L as f,M as x,E as y,D as b,y as h}from"./index-DaxDs61y.js";import{_ as g}from"./DetailView.AfmB4Ivu.js";import{_ as k}from"./PyTitle.D47dl7PS.js";import{_ as j}from"./PythrootChainSlogan.vue_vue_type_script_setup_true_lang.5mEe1xCB.js";import{o as w}from"./on-chain.ItkuIJXP.js";import{u as S}from"./usePageOptions.jEGe_QTx.js";import{f as N}from"./index.CcP8NHFf.js";import"./BannerView.vue_vue_type_script_setup_true_lang.CF3VAy17.js";import"./wd-tab.DZR2fRXZ.js";import"./wd-card.Cl2RAoFW.js";import"./Descriptions.vue_vue_type_script_setup_true_lang.D1bSySSl.js";import"./wd-col.UalwK-zB.js";import"./PyText.vue_vue_type_script_setup_true_lang.vURujYEu.js";import"./wd-text.CbY3ya9s.js";import"./wd-divider.6X9m2heG.js";const D=e({__name:"detail",setup(e){const D=t(),I=a(),C=a(""),P=a([{label:"分类",value:""},{label:"已发放",value:""},{label:"发放方",value:""},{label:"发放日期",value:""}]),F=a([{key:"associated-profit",title:"关联权益",content:[]},{key:"introduce",title:"详细介绍",content:""}]),B=a();function E(){D.push({name:"evidence",params:{type:"1",id:String(I.value)}})}return S(async e=>{var t,a,r;const{id:s}=e||{};I.value=Number(s);const l=await n.app.getOrderDetail({params:{orderId:I.value}});if(null==l?void 0:l.data){B.value=l.data,C.value=null==(t=B.value)?void 0:t.productSpuName,P.value.forEach(e=>{var t,a,r,s;switch(e.label){case"分类":e.value=(null==(t=B.value)?void 0:t.productSpuCategoryName)||"未分类";break;case"发放方":e.value=(null==(a=B.value)?void 0:a.issuerName)||"未知发放方";break;case"发放日期":e.value=N(null==(r=B.value)?void 0:r.createTime);break;case"已发放":e.value=(e=>{if(!e)return"0";const t=Number(e);return Number.isNaN(t)?String(e):t.toLocaleString("zh-CN")})(null==(s=B.value)?void 0:s.productSpuIssuedQuantity)}});const e=(null==(a=B.value)?void 0:a.voucherIssue)||[];F.value.find(e=>"associated-profit"===e.key).content=e.map(e=>({id:e.id||String(Date.now()+Math.random()),avatar:e.picUrl,title:e.name}));const s=F.value.find(e=>"introduce"===e.key);s&&(s.content=(null==(r=B.value)?void 0:r.productSpuDescription)||"<p>暂无详细介绍</p>")}else B.value=void 0,i({icon:"error",title:"没有获取到数根详情"})}),(e,t)=>{const a=j,n=y,i=b,S=m,N=k,D=g,I=l("layout-default-uni"),T=o("dompurify-html");return u(),r(I,null,{default:s(()=>[p(D,{"card-title":c(C),"card-info":c(P),sections:c(F),"banner-src":c("/assets/pythroot-detail-banner-InoH0306.png"),"card-offset":"-40rpx","banner-height":"420rpx"},{"banner-front":s(()=>[p(a)]),"card-content-extra":s(()=>{var e;return[1===Number(null==(e=c(B))?void 0:e.chainStatus)?(u(),r(i,{key:0,class:"mt-20rpx",block:"",plain:"",onClick:E},{default:s(()=>[p(n,{class:"mr-10rpx",width:"24rpx",height:"24rpx",src:c(w)},null,8,["src"]),h("链上信息 ")]),_:1})):d("",!0)]}),"section-content":s(({sectionItem:e})=>["associated-profit"===e.key?(u(),r(S,{key:0,class:"gap-20rpx mt-8rpx flex flex-col"},{default:s(()=>[(u(!0),_(f,null,x(e.content,e=>(u(),r(S,{key:e.id,class:"rounded-20rpx p-20rpx gap-18rpx b-2rpx b-[rgba(41,162,251,0.4)] flex items-center border-solid"},{default:s(()=>[p(S,{class:"w-96rpx h-96rpx rounded-8rpx p-16rpx bg-#F3F3F5 flex-shrink-0"},{default:s(()=>[p(n,{width:"100%",height:"100%",round:"",radius:"10rpx",alt:"",src:e.avatar},null,8,["src"])]),_:2},1024),p(N,{text:e.title},null,8,["text"])]),_:2},1024))),128))]),_:2},1024)):d("",!0),"introduce"===e.key?v((u(),r(S,{key:1},null,512)),[[T,e.content]]):d("",!0)]),_:1},8,["card-title","card-info","sections","banner-src"])]),_:1})}}});export{D as default};
