import{_ as t}from"./BannerView.vue_vue_type_script_setup_true_lang.BEJtDK2a.js";import{_ as e}from"./AppVersion.vue_vue_type_script_setup_true_lang.oBVIPYf8.js";import{d as s,c as a,a as r,e as l,w as i,b as o,E as p,A as u,t as n,D as f,y as x,_ as d,H as c,B as m,r as _,b6 as g,V as h,W as y,X as b,P as v}from"./index-a6TtsOgc.js";import{_ as k}from"./GradientText.vue_vue_type_script_setup_true_lang.BaEWYYVF.js";import{_ as w}from"./PyText.vue_vue_type_script_setup_true_lang.C4vd1DLX.js";import{_ as j}from"./PyTitle.CL2zNIOD.js";import{f as P}from"./index.CVFvtcrF.js";import{u as C,_ as E}from"./usePaged.CElQBFki.js";import{b as T,_ as B,a as I}from"./wd-tab.ButUF3oK.js";import"./wd-text.O2Z1f8vu.js";import"./_commonjsHelpers.lGe4XDVY.js";import"./useTouch.CRYpSxCS.js";const L=d(s({name:"NProfitListItem",__name:"NProfitListItem",props:{avatarSrc:{default:void 0},expireTime:{default:void 0},issuer:{},pythrootList:{default:()=>[]},title:{},status:{}},emits:["extraButtonClick"],setup(t,{emit:e}){const s=e;function d(t){t.stopPropagation(),s("extraButtonClick")}return(t,e)=>{const s=p,c=l,m=j,_=w,g=k,h=f;return r(),a(c,{class:"n-profit-list-item rounded-30rpx bg-#fff relative flex"},{default:i(()=>[o(c,{class:"w-248rpx h-248rpx rounded-tl-30rpx rounded-bl-30rpx flex-shrink-0 overflow-hidden"},{default:i(()=>[o(s,{width:"100%",height:"100%",alt:"",mode:"aspectFill",src:t.avatarSrc},null,8,["src"])]),_:1}),o(c,{class:"h-248rpx w-6rpx overflow-hidden"},{default:i(()=>[o(c,{class:"dashed-divider"})]),_:1}),o(c,{class:"pt-16rpx pb-8rpx pl-28rpx pr-32rpx gap-4rpx h-248rpx flex flex-grow flex-col"},{default:i(()=>[o(m,{"custom-class":"!font-600 mb-12rpx",text:t.title,size:"28rpx","line-height":"normal",bold:""},null,8,["text"]),o(c,{class:"gap-2rpx pr-11rpx flex flex-col"},{default:i(()=>[o(c,{class:"gap-24rpx inline-flex"},{default:i(()=>[o(_,{"custom-class":"flex-shrink-0",text:"发行方: "}),o(c,{class:"bg-#29a2fb26 rounded-24rpx px-18rpx max-w-236rpx flex items-center justify-center py-0"},{default:i(()=>[o(g,{"custom-class":"font-500 text-24rpx leading-32rpx truncate min-w-2rpx",from:"#29a2fb",to:"#00bfa5",text:t.issuer},null,8,["text"])]),_:1})]),_:1}),o(c,{class:"gap-24rpx inline-flex"},{default:i(()=>[o(_,{"custom-class":"flex-shrink-0",text:"关联数根: "}),o(_,{"custom-class":"font-300",lines:1,text:t.pythrootList.length>0?t.pythrootList.join(" "):"无"},null,8,["text"])]),_:1}),o(c,{class:"gap-24rpx inline-flex"},{default:i(()=>[o(_,{"custom-class":"flex-shrink-0",text:"到期时间: "}),o(_,{"custom-class":"font-300",lines:1,text:`${u(P)(t.expireTime,"YYYY年MM月DD日")}`},null,8,["text"])]),_:1})]),_:1}),o(c,{class:"mt-8rpx flex justify-end"},{default:i(()=>[0===t.status?(r(),a(h,{key:0,onClick:d},{default:i(()=>[x(" 去使用 ")]),_:1})):n("",!0),30===t.status?(r(),a(h,{key:1,plain:"",disabled:""},{default:i(()=>[x(" 已核销 ")]),_:1})):n("",!0)]),_:1})]),_:1}),o(c,{class:"round-mask bg-#f5f5f5 w-86rpx h-86rpx absolute right-0 top-1/2 translate-x-1/2 translate-y--1/2 rounded-full"})]),_:1})}}}),[["__scopeId","data-v-1e84a0fe"]]),S=s({__name:"index",setup(s){const p=c(),f=m("all"),x=[{key:"all",title:"全部"}],d=m(new Map);const{list:k}=C(async function(t){d.value.clear();const e=await v.app.getOrderPage({params:{type:2,...t}}),{code:s,data:a}=e||{};if(0!==s||!a)throw new Error("获取数据失败");const{list:r}=a;return(r||[]).forEach(t=>{const e=[];Array.isArray(t.productsIssue)&&t.productsIssue.forEach(t=>{e.push(t.name)}),void 0!==t.id&&d.value.set(t.id,e)}),a});return(s,c)=>{const m=I,v=B,w=l,j=T,P=E,C=L,S=e,V=t,A=_("layout-tabbar-uni");return r(),a(A,null,{default:i(()=>[o(V,{"custom-class":"pb-228rpx bg-#f5f5f5","banner-height":"332rpx","banner-src":u("/assets/profit-banner-so3idplw.png")},{default:i(()=>[o(w,{class:"p-28rpx bg-#f5f5f5 mt-[-30rpx] rounded-t-2xl pt-0"},{default:i(()=>[o(j,{"offset-top":-44},{default:i(()=>[o(w,{class:"mb-16rpx w-690rpx bg-#f5f5f5"},{default:i(()=>[o(w,{class:"px-20rpx bg-#f5f5f5 inline-flex"},{default:i(()=>[o(v,{modelValue:u(f),"onUpdate:modelValue":c[0]||(c[0]=t=>g(f)?f.value=t:null)},{default:i(()=>[(r(),h(y,null,b(x,t=>o(m,{key:t.key,title:`${t.title}`,name:t.key},null,8,["title","name"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(w,{class:"gap-36rpx px-8rpx flex flex-col"},{default:i(()=>[0===u(k).length?(r(),a(w,{key:0},{default:i(()=>[o(P)]),_:1})):n("",!0),(r(!0),h(y,null,b(u(k),(t,e)=>(r(),a(C,{color:"orange",key:e,status:t.status,"avatar-src":t.productSpuPicUrl,title:t.productSpuName,issuer:t.issuerName,"pythroot-list":u(d).get(t.id)||[],"expire-time":t.expireTime,onClick:e=>{return s=t.id,void p.push({name:"profitDetail",params:{id:String(s)}});var s},onExtraButtonClick:e=>{return s=t.id,void p.push({name:"profitQRCode",params:{id:String(s)}});var s}},null,8,["status","avatar-src","title","issuer","pythroot-list","expire-time","onClick","onExtraButtonClick"]))),128))]),_:1})]),_:1}),o(S)]),_:1},8,["banner-src"])]),_:1})}}});export{S as default};
