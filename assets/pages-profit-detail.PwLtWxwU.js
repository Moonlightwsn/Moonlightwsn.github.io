import{_ as e}from"./DetailView.BXi5mJjj.js";import{_ as a}from"./PyTitle.CRqKHNN_.js";import{d as t,l as r,m as l,a as i,w as o,q as s,z as n,o as d,e as u,u as p,f as c,A as m,i as v,s as x,F as f,v as h,k as y,_ as b,h as g}from"./index-DaoIyQhi.js";import{o as w}from"./on-chain.ItkuIJXP.js";import{p as j}from"./profit-cover.Brv83Jt1.js";import{u as k}from"./usePageOptions.wwQpX9a9.js";import{P as _}from"./index.TxoMC2Cv.js";import"./wd-tab.Cw4yMMi8.js";import"./wd-card.BcAox_dV.js";import"./wd-col.BJmA3bYW.js";import"./wd-divider.D-N7mN3Y.js";import"./wd-text.Br-nob88.js";import"./alova.esm.BwIAK7PD.js";import"./index.CqOBavWu.js";const D=t({__name:"detail",setup(t){const D=r(),I=l("静安志愿者"),S=l([{label:"权益编号",value:"PJSL20250001"},{label:"到期日期",value:"2025-12-15"},{label:"发放方",value:"上海市静安社区服务中心"},{label:"发放日期",value:"2025-10-15"}]),N=l([{key:"associated-pythroot",title:"关联数根",content:[{id:"1",avatar:j,title:"星巴克经典咖啡兑换券"},{id:"2",avatar:j,title:"滴滴快车5折券"}]},{key:"introduce",title:"详细介绍",content:'<p><img src="http://10.1.100.13:9000/pythroot/20250909/OIP-C_1757405734487.jpg">&nbsp;</p>\n<p>乌萨奇是个可爱宝宝</p>'}]),P=l();return k(async e=>{var a,t,r;const{id:l}=e||{},i=await _.app.getOrderDetail({params:{orderId:Number.parseInt(l)}});if(null==i?void 0:i.data){P.value=i.data,I.value=null==(a=P.value)?void 0:a.productSpuName,S.value.forEach(e=>{var a,t,r,l,i,o;switch(e.label){case"到期日期":e.value=(null==(a=P.value)?void 0:a.expireTime)?new Date(null==(t=P.value)?void 0:t.expireTime).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}):"未设置日期";break;case"发放方":e.value=(null==(r=P.value)?void 0:r.issuerName)||"未知发放方";break;case"发放日期":e.value=(null==(l=P.value)?void 0:l.createTime)?new Date(null==(i=P.value)?void 0:i.createTime).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}):"未设置日期";break;case"权益编号":e.value=(null==(o=P.value)?void 0:o.productSpuCategoryName)||"未分类"}});const e=(null==(t=P.value)?void 0:t.productsIssue)||[];N.value.find(e=>"associated-pythroot"===e.key).content=e.map(e=>({id:e.id||String(Date.now()+Math.random()),avatar:e.picUrl,title:e.name||""}));const l=N.value.find(e=>"introduce"===e.key);l&&(l.content=(null==(r=P.value)?void 0:r.productSpuIntroduction)||"<p>暂无详细介绍</p>")}else P.value=void 0,D.info("没有获取到权益详情")}),(t,r)=>{const l=y,j=b,k=v,_=a,D=e,P=s("layout-default-uni"),C=n("dompurify-html");return d(),i(P,null,{default:o(()=>[u(D,{"card-title":p(I),"card-info":p(S),sections:p(N),"is-show-btn":!0},{"card-content-extra":o(()=>[u(j,{class:"mt-20rpx",block:"",plain:""},{default:o(()=>[u(l,{class:"mr-10rpx",width:"24rpx",height:"24rpx",src:p(w)},null,8,["src"]),g("链上信息 ")]),_:1})]),"section-content":o(({sectionItem:e})=>["associated-pythroot"===e.key?(d(),i(k,{key:0,class:"gap-20rpx mt-8rpx flex flex-col"},{default:o(()=>[(d(!0),x(f,null,h(e.content,e=>(d(),i(k,{key:e.id,class:"rounded-20rpx p-20rpx gap-18rpx b-2rpx b-[rgba(41,162,251,0.4)] flex items-center border-solid"},{default:o(()=>[u(k,{class:"w-96rpx h-96rpx rounded-8rpx p-16rpx bg-#F3F3F5 flex-shrink-0"},{default:o(()=>[u(l,{width:"100%",height:"100%",round:"",radius:"10rpx",alt:"",src:e.avatar},null,8,["src"])]),_:2},1024),u(_,{text:e.title},null,8,["text"])]),_:2},1024))),128))]),_:2},1024)):c("",!0),"introduce"===e.key?m((d(),i(k,{key:1},null,512)),[[C,e.content]]):c("",!0)]),_:1},8,["card-title","card-info","sections"])]),_:1})}}});export{D as default};
