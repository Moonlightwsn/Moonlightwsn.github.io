import{g as e,a3 as a,d as s,q as t,bK as i,t as l,bp as o,s as u,c as n,a as m,e as g,n as c,j as r,w as p,k as d,v,K as h,z as f,A as y,_ as w,bL as z,D as S,bc as b,bM as _,B as k,o as x,O as $,b4 as N,a4 as P,bj as j,bd as C,bN as M,bO as T}from"./index-DSHRyYKW.js";const B=w(s({name:"wd-status-tip",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...e,image:a("network"),imageSize:{type:[String,Number,Object],default:""},tip:a(""),imageMode:a("aspectFill"),urlPrefix:a("https://registry.npmmirror.com/wot-design-uni-assets/*/files/")},setup(e){const a=e,s=t(()=>{let e="";return e=["search","network","content","collect","comment","halo","message"].includes(a.image)?`${a.urlPrefix}${a.image}.png`:a.image,e}),w=t(()=>{let e={};return a.imageSize&&(i(a.imageSize)?(l(a.imageSize.height)&&(e.height=o(a.imageSize.height)),l(a.imageSize.width)&&(e.width=o(a.imageSize.width))):e={height:o(a.imageSize),width:o(a.imageSize)}),`${u(e)}`});return(e,a)=>{const t=g;return m(),n(t,{class:r(`wd-status-tip  ${e.customClass}`),style:c(e.customStyle)},{default:p(()=>[e.$slots.image?d(e.$slots,"image",{key:0},void 0,!0):s.value?(m(),n(h,{key:1,mode:e.imageMode,src:s.value,"custom-class":"wd-status-tip__image","custom-style":w.value},null,8,["mode","src","custom-style"])):v("",!0),e.tip?(m(),n(t,{key:2,class:"wd-status-tip__text"},{default:p(()=>[f(y(e.tip),1)]),_:1})):v("",!0)]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-fff4de2e"]]),E=s({name:"PyEmptyTip",__name:"PyEmptyTip",props:{customClass:{default:""},image:{default:"/assets/empty-status-BN6eqwVE.png"},imageSize:{default:"320rpx"},tip:{default:"暂无数据"}},setup:e=>(e,a)=>{const s=B;return m(),n(s,{"custom-class":e.customClass,image:e.image,tip:e.tip,"image-size":e.imageSize},null,8,["custom-class","image","tip","image-size"])}});function I(e){const{initialized:a}=z(),s=S(1),t=S(0),i=S([]),l=S(!1),o=S(!1);async function u(a){if(o.value)return;l.value=!0,o.value=!0,s.value=1;const u=await e({pageNo:s.value,pageSize:10,sourceType:a}).finally(()=>{C(),o.value=!1}),{total:n,list:m}=u||{};t.value=n||0,i.value=m||[]}function n(e){T(),u(e||"manual")}return b(()=>{u("onPullDownRefresh")}),_(async()=>{let a=s.value;const l=i.value.length;t.value,l%10==0&&(a+=1);const o=await e({pageNo:a,pageSize:10,sourceType:"onReachBottom"}),{total:u,list:n}=o||{};n.length>0&&(s.value=a),t.value=u||0;k(i).splice(10*(a-1),n.length,...n)}),x(()=>{a.value&&n("onMounted")}),$(()=>{if(!a.value)return;N().triggerReLogin(!1),n("onShow")}),P(()=>a.value,(e,a)=>{l.value||a||!e||n("onInit")}),j(()=>{C()}),M(()=>{C()}),{list:i,total:t,reload:n}}export{E as _,I as u};
