import{_ as t}from"./BannerView.vue_vue_type_script_setup_true_lang.CT3f7-Js.js";import{d as e,c as a,a as s,e as r,w as l,b as i,K as o,I as n,B as p,G as u,v as d,J as f,z as x,A as c,_ as m,H as _,D as h,r as g,aP as b,S as y,T as v,U as k,P as w}from"./index-CTwWc01z.js";import{_ as j}from"./GradientText.vue_vue_type_script_setup_true_lang.Cq2DmTxV.js";import{_ as P}from"./PyTitle.IQCPEvAc.js";import{u as C,_ as M}from"./usePaged.Bu9luhrK.js";import{b as S,_ as B,a as I}from"./wd-tab.DXmyPOWq.js";const L=m(e({name:"NProfitListItem",__name:"NProfitListItem",props:{avatarSrc:{default:void 0},expireTime:{default:void 0},issuer:{},pythrootList:{default:()=>[]},title:{},status:{},redemptionMethod:{}},emits:["extraButtonClick"],setup(t,{emit:e}){const m=e;function _(t){t.stopPropagation(),m("extraButtonClick")}return(t,e)=>{const m=o,h=r,g=P,b=n,y=j,v=f;return s(),a(h,{class:"n-profit-list-item rounded-30rpx bg-#fff relative flex"},{default:l(()=>[i(h,{class:"w-248rpx h-248rpx rounded-tl-30rpx rounded-bl-30rpx flex-shrink-0 overflow-hidden"},{default:l(()=>[i(m,{width:"100%",height:"100%",alt:"",mode:"aspectFill",src:t.avatarSrc},null,8,["src"])]),_:1}),i(h,{class:"h-248rpx w-6rpx overflow-hidden"},{default:l(()=>[i(h,{class:"dashed-divider"})]),_:1}),i(h,{class:"pt-16rpx pb-8rpx pl-28rpx pr-32rpx gap-4rpx h-248rpx flex flex-grow flex-col"},{default:l(()=>[i(g,{"custom-class":"!font-600 mb-12rpx",text:t.title,size:"28rpx","line-height":"normal",bold:""},null,8,["text"]),i(h,{class:"gap-2rpx pr-11rpx flex flex-col"},{default:l(()=>[i(h,{class:"gap-24rpx inline-flex"},{default:l(()=>[i(b,{"custom-class":"flex-shrink-0",text:"发行方: "}),i(h,{class:"bg-#29a2fb26 rounded-24rpx px-18rpx max-w-236rpx flex items-center justify-center py-0"},{default:l(()=>[i(y,{"custom-class":"font-500 text-24rpx leading-32rpx truncate min-w-2rpx",from:"#29a2fb",to:"#00bfa5",text:t.issuer},null,8,["text"])]),_:1})]),_:1}),i(h,{class:"gap-24rpx inline-flex"},{default:l(()=>[i(b,{"custom-class":"flex-shrink-0",text:"关联数根: "}),i(b,{"custom-class":"font-300",lines:1,text:t.pythrootList.length>0?t.pythrootList.join(" "):"无"},null,8,["text"])]),_:1}),i(h,{class:"gap-24rpx inline-flex"},{default:l(()=>[i(b,{"custom-class":"flex-shrink-0",text:"到期时间: "}),i(b,{"custom-class":"font-300",lines:1,text:`${p(u)(t.expireTime,"YYYY年MM月DD日")}`},null,8,["text"])]),_:1})]),_:1}),i(h,{class:"mt-8rpx flex justify-end"},{default:l(()=>[0===t.status?(s(),a(v,{key:0,onClick:_},{default:l(()=>[x(c("2"===t.redemptionMethod?"去激活":"去使用"),1)]),_:1})):d("",!0),30===t.status?(s(),a(v,{key:1,plain:"",disabled:""},{default:l(()=>[x(c("2"===t.redemptionMethod?"已激活":"已核销"),1)]),_:1})):d("",!0)]),_:1})]),_:1}),i(h,{class:"round-mask bg-#f5f5f5 w-86rpx h-86rpx absolute right-0 top-1/2 translate-x-1/2 translate-y--1/2 rounded-full"})]),_:1})}}}),[["__scopeId","data-v-0e36904c"]]),T=e({__name:"index",setup(e){const o=_(),n=h("all"),u=[{key:"all",title:"全部"}],f=h(new Map);const{list:x}=C(async function(t){f.value.clear();const e=await w.app.getOrderPage({params:{type:2,...t}}),{code:a,data:s}=e||{};if(0!==a||!s)throw new Error("获取数据失败");const{list:r}=s;return(r||[]).forEach(t=>{const e=[];Array.isArray(t.productsIssue)&&t.productsIssue.forEach(t=>{e.push(t.name)}),void 0!==t.id&&f.value.set(t.id,e)}),s});return(e,c)=>{const m=I,_=B,h=r,w=S,j=M,P=L,C=t,T=g("layout-tabbar-uni");return s(),a(T,null,{default:l(()=>[i(C,{"custom-class":"pb-228rpx bg-#f5f5f5","banner-height":"332rpx","banner-src":p("/assets/profit-banner-so3idplw.png")},{default:l(()=>[i(h,{class:"p-28rpx bg-#f5f5f5 mt-[-30rpx] rounded-t-2xl pt-0"},{default:l(()=>[i(w,{"offset-top":-44},{default:l(()=>[i(h,{class:"mb-16rpx w-690rpx bg-#f5f5f5"},{default:l(()=>[i(h,{class:"px-20rpx bg-#f5f5f5 inline-flex"},{default:l(()=>[i(_,{modelValue:p(n),"onUpdate:modelValue":c[0]||(c[0]=t=>b(n)?n.value=t:null)},{default:l(()=>[(s(),y(v,null,k(u,t=>i(m,{key:t.key,title:`${t.title}`,name:t.key},null,8,["title","name"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(h,{class:"gap-36rpx px-8rpx flex flex-col"},{default:l(()=>[0===p(x).length?(s(),a(h,{key:0},{default:l(()=>[i(j)]),_:1})):d("",!0),(s(!0),y(v,null,k(p(x),(t,e)=>(s(),a(P,{color:"orange",key:e,status:t.status,"redemption-method":t.redemptionMethod,"avatar-src":t.productSpuPicUrl,title:t.productSpuName,issuer:t.issuerName,"pythroot-list":p(f).get(t.id)||[],"expire-time":t.expireTime,onClick:e=>{return a=t.id,void o.push({name:"profitDetail",params:{id:String(a)}});var a},onExtraButtonClick:e=>{return a=t.id,void("2"===t.redemptionMethod?o.push({name:"profitDetail",params:{id:String(a)}}):o.push({name:"profitQRCode",params:{id:String(a)}}));var a}},null,8,["status","redemption-method","avatar-src","title","issuer","pythroot-list","expire-time","onClick","onExtraButtonClick"]))),128))]),_:1})]),_:1})]),_:1},8,["banner-src"])]),_:1})}}});export{T as default};
