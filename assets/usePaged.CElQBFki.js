import{g as e,a6 as a,d as s,p as t,bv as i,s as l,L as u,q as o,c as n,a as m,e as g,n as r,h as c,w as p,j as d,t as v,E as h,y,z as f,_ as w,bw as z,B as S,bx as _,by as b,A as x,o as $,T as k,a$ as P,M as T,b8 as B,bz as C,bA as E,bB as M}from"./index-a6TtsOgc.js";const N=w(s({name:"wd-status-tip",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...e,image:a("network"),imageSize:{type:[String,Number,Object],default:""},tip:a(""),imageMode:a("aspectFill"),urlPrefix:a("https://registry.npmmirror.com/wot-design-uni-assets/*/files/")},setup(e){const a=e,s=t(()=>{let e="";return e=["search","network","content","collect","comment","halo","message"].includes(a.image)?`${a.urlPrefix}${a.image}.png`:a.image,e}),w=t(()=>{let e={};return a.imageSize&&(i(a.imageSize)?(l(a.imageSize.height)&&(e.height=u(a.imageSize.height)),l(a.imageSize.width)&&(e.width=u(a.imageSize.width))):e={height:u(a.imageSize),width:u(a.imageSize)}),`${o(e)}`});return(e,a)=>{const t=g;return m(),n(t,{class:c(`wd-status-tip  ${e.customClass}`),style:r(e.customStyle)},{default:p(()=>[e.$slots.image?d(e.$slots,"image",{key:0},void 0,!0):s.value?(m(),n(h,{key:1,mode:e.imageMode,src:s.value,"custom-class":"wd-status-tip__image","custom-style":w.value},null,8,["mode","src","custom-style"])):v("",!0),e.tip?(m(),n(t,{key:2,class:"wd-status-tip__text"},{default:p(()=>[y(f(e.tip),1)]),_:1})):v("",!0)]),_:3},8,["class","style"])}}}),[["__scopeId","data-v-fff4de2e"]]),j=s({name:"PyEmptyTip",__name:"PyEmptyTip",props:{customClass:{default:""},image:{default:"/assets/empty-status-BN6eqwVE.png"},imageSize:{default:"320rpx"},tip:{default:"暂无数据"}},setup:e=>(e,a)=>{const s=N;return m(),n(s,{"custom-class":e.customClass,image:e.image,tip:e.tip,"image-size":e.imageSize},null,8,["custom-class","image","tip","image-size"])}});function I(e){const{initialized:a}=z(),s=S(1),t=S(0),i=S([]),l=S(!1),u=S(!1);async function o(a){if(u.value)return;l.value=!0,u.value=!0,s.value=1;const o=await e({pageNo:s.value,pageSize:10,sourceType:a}).finally(()=>{C(),u.value=!1}),{total:n,list:m}=o||{};t.value=n||0,i.value=m||[]}function n(e){M(),o(e||"manual")}return _(()=>{o("onPullDownRefresh")}),b(async()=>{let a=s.value;const l=i.value.length;t.value,l%10==0&&(a+=1);const u=await e({pageNo:a,pageSize:10,sourceType:"onReachBottom"}),{total:o,list:n}=u||{};n.length>0&&(s.value=a),t.value=o||0;x(i).splice(10*(a-1),n.length,...n)}),$(()=>{a.value&&n("onMounted")}),k(()=>{if(!a.value)return;P().triggerReLogin(!1),n("onShow")}),T(()=>a.value,(e,a)=>{l.value||a||!e||n("onInit")}),B(()=>{C()}),E(()=>{C()}),{list:i,reload:n}}export{j as _,I as u};
