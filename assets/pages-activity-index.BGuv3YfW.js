import{_ as a,a as t,b as e}from"./wd-tab.Cw4yMMi8.js";import{a as r,_ as i,b as s,c as l,d as o,e as n,f as p}from"./avatar-4.W_nxiSMT.js";import{d,l as m,H as u,m as c,p as v,a as f,w as y,q as g,o as x,e as h,u as j,i as w,s as b,F as _,v as k,B as P}from"./index-DaoIyQhi.js";import{p as S}from"./pythroot-cover.uw0y0JkF.js";import{P as z}from"./index.TxoMC2Cv.js";import"./wd-card.BcAox_dV.js";import"./wd-divider.D-N7mN3Y.js";import"./PyTitle.CRqKHNN_.js";import"./wd-text.Br-nob88.js";import"./_commonjsHelpers.lGe4XDVY.js";import"./alova.esm.BwIAK7PD.js";import"./index.CqOBavWu.js";const J=d({__name:"index",setup(d){const J=m(),L=u(),N=c("all"),T=[{key:"all",title:"全部"},{key:"hasProfit",title:"有权益"}],U=c([{avatar:l},{avatar:o},{avatar:n},{avatar:p}]),V=c([]);return v(async()=>{var a;console.log("数根页");try{const t=await z.app.getActivityPage({params:{type:1,pageNo:1,pageSize:20}});(null==(a=null==t?void 0:t.data)?void 0:a.list)&&t.data.list.length>0?V.value=t.data.list.map(a=>{return{id:(null==(t=a)?void 0:t.id)||Date.now().toString(),img:(null==t?void 0:t.picUrl)||S,title:(null==t?void 0:t.name)||"未命名数根"};var t}):(V.value=[],J.info("没有获取到活动数据"))}catch(t){J.error(`获取活动数据失败：${t instanceof Error?t.message:String(t)}`),V.value=[]}}),(l,o)=>{const n=e,p=t,d=w,m=i,u=a,c=g("layout-tabbar-uni");return x(),f(c,null,{default:y(()=>[h(u,{"banner-height":"364rpx","placeholder-height":"280rpx","banner-src":j(r)},{header:y(()=>[h(d,{class:"banner-view-header z-999 sticky top-0 w-full"},{default:y(()=>[h(p,{modelValue:j(N),"onUpdate:modelValue":o[0]||(o[0]=a=>P(N)?N.value=a:null)},{default:y(()=>[(x(),b(_,null,k(T,a=>h(n,{key:a.key,title:`${a.title}`},null,8,["title"])),64))]),_:1},8,["modelValue"])]),_:1})]),default:y(()=>[h(d,{class:"p-30rpx gap-20rpx flex translate-y-[-260rpx] flex-col bg-transparent"},{default:y(()=>[(x(!0),b(_,null,k(j(V),a=>(x(),f(m,{key:a.id,"cover-img-src":a.picUrl||j(s),title:a.name,location:a.address||"","start-time":a.createTime,"end-time":a.endTime,participants:j(U),"pythroot-list":a.pythrootList,"profit-list":a.profitList,"extra-button-text":"马上参与",onJoinNow:t=>{return e=a.id,void L.push({name:"activityDetail",params:{id:String(e)}});var e}},null,8,["cover-img-src","title","location","start-time","end-time","participants","pythroot-list","profit-list","onJoinNow"]))),128))]),_:1})]),_:1},8,["banner-src"])]),_:1})}}});export{J as default};
