import{_ as t,a,b as s}from"./wd-tab.Cw4yMMi8.js";import{a as e,_ as r,b as i,c as o,d as l,e as n,f as p}from"./avatar-4.W_nxiSMT.js";import{d as u,l as d,m,p as c,a as v,w as f,q as h,o as y,e as g,u as j,i as x,s as w,F as b,v as _,B as P}from"./index-DaoIyQhi.js";import{p as V}from"./profit-cover.Brv83Jt1.js";import{p as k}from"./pythroot-cover.uw0y0JkF.js";import{P as A}from"./index.TxoMC2Cv.js";import"./wd-card.BcAox_dV.js";import"./wd-divider.D-N7mN3Y.js";import"./PyTitle.CRqKHNN_.js";import"./wd-text.Br-nob88.js";import"./_commonjsHelpers.lGe4XDVY.js";import"./alova.esm.BwIAK7PD.js";import"./index.CqOBavWu.js";const L=u({__name:"record",setup(u){const L=d(),S=m("all"),U=[{key:"all",title:"全部"},{key:"hasProfit",title:"有权益"}],z=m([{avatar:o},{avatar:l},{avatar:n},{avatar:p}]),T=m([]),B=t=>({id:(null==t?void 0:t.id)||Date.now().toString(),img:(null==t?void 0:t.picUrl)||k,title:(null==t?void 0:t.name)||"未命名数根"}),D=t=>{const a=[];t.issueProduct&&(Array.isArray(t.issueProduct)?a.push(...t.issueProduct.map(t=>B(t))):a.push(B(t.issueProduct)));const s=[];var e;return t.issueVoucher&&(Array.isArray(t.issueVoucher)?s.push(...t.issueVoucher.map(t=>B(t))):s.push({id:(null==(e=t.issueVoucher)?void 0:e.id)||Date.now().toString(),img:(null==e?void 0:e.picUrl)||V,title:(null==e?void 0:e.name)||"未命名权益"})),{...t,pythrootList:a,profitList:s}};return c(async()=>{var t;try{const a=await A.app.getActivityPage({params:{type:1,pageNo:1,pageSize:20}});(null==(t=null==a?void 0:a.data)?void 0:t.list)&&a.data.list.length>0?T.value=a.data.list.map(t=>D(t)):(T.value=[],L.info("没有获取到活动数据"))}catch(a){L.error(`获取活动数据失败：${a instanceof Error?a.message:String(a)}`),T.value=[]}}),(o,l)=>{const n=s,p=a,u=x,d=r,m=t,c=h("layout-tabbar-uni");return y(),v(c,null,{default:f(()=>[g(m,{"banner-height":"364rpx","placeholder-height":"280rpx","banner-src":j(e)},{header:f(()=>[g(u,{class:"banner-view-header z-999 sticky top-0 w-full"},{default:f(()=>[g(p,{modelValue:j(S),"onUpdate:modelValue":l[0]||(l[0]=t=>P(S)?S.value=t:null)},{default:f(()=>[(y(),w(b,null,_(U,t=>g(n,{key:t.key,title:`${t.title}`},null,8,["title"])),64))]),_:1},8,["modelValue"])]),_:1})]),default:f(()=>[g(u,{class:"p-30rpx gap-20rpx flex translate-y-[-260rpx] flex-col bg-transparent"},{default:f(()=>[(y(!0),w(b,null,_(j(T),t=>(y(),v(d,{key:t.id,"cover-img-src":t.picUrl||j(i),title:t.name,location:t.address||"","start-time":t.createTime,"end-time":t.endTime,participants:j(z),"pythroot-list":t.pythrootList,"profit-list":t.profitList,status:"已结束"},null,8,["cover-img-src","title","location","start-time","end-time","participants","pythroot-list","profit-list"]))),128))]),_:1})]),_:1},8,["banner-src"])]),_:1})}}});export{L as default};
