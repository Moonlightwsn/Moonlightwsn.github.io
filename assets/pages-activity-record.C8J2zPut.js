import{_ as t,a as s}from"./activity-cover.C0dUpgrc.js";import{u as i,_ as a}from"./usePaged.BNwJwJlH.js";import{d as r,H as e,c as o,w as n,r as l,a as u,b as c,e as p,t as d,M as m,A as h,N as v,O as f,P as y}from"./index-Bly4hIk5.js";import"./wd-card.BfjIy9EC.js";import"./wd-divider.DmdDC7_O.js";import"./PyTitle.Cr1dk33U.js";import"./index.Lf5rPU8V.js";const g=r({__name:"record",setup(r){const g=e(),w=t=>({id:(null==t?void 0:t.id)||Date.now().toString(),img:(null==t?void 0:t.picUrl)||"/assets/pythroot-cover-DrifrCw4.png",title:(null==t?void 0:t.name)||"未命名数根"}),x=t=>{const s=[];t.issueProduct&&(Array.isArray(t.issueProduct)?s.push(...t.issueProduct.map(t=>w(t))):s.push(w(t.issueProduct)));const i=[];var a;t.issueVoucher&&(Array.isArray(t.issueVoucher)?i.push(...t.issueVoucher.map(t=>w(t))):i.push({id:(null==(a=t.issueVoucher)?void 0:a.id)||Date.now().toString(),img:(null==a?void 0:a.picUrl)||"/assets/profit-cover-DT0GkUSG.png",title:(null==a?void 0:a.name)||"未命名权益"}));const r=[];return t.attendedUsers&&t.attendedUsers.forEach(t=>{r.push((t=>({avatar:null==t?void 0:t.avatar}))(t))}),{...t,pythrootList:s,profitList:i,participants:r}};const{list:A}=i(async function(t){const s=await y.app.getActivityAttendancePage({params:{...t}}),{code:i,data:a}=s||{};if(0!==i||!a)throw new Error("获取数据失败");console.log("data",a);const r=(a.list||[]).map(t=>x(t));return console.log(r),{list:r,total:a.total||0}});return(i,r)=>{const e=a,y=p,w=t,x=l("layout-default-uni");return u(),o(x,null,{default:n(()=>[c(y,{class:"px-30rpx py-40rpx gap-20rpx flex min-h-screen flex-col bg-white"},{default:n(()=>[0===h(A).length?(u(),o(y,{key:0},{default:n(()=>[c(e)]),_:1})):d("",!0),(u(!0),m(v,null,f(h(A),t=>(u(),o(w,{key:t.id,border:!0,"show-status":!1,"cover-img-src":t.picUrl||h(s),title:t.name,location:t.address||"","start-time":t.createTime,"end-time":t.endTime,participants:t.participants,"pythroot-list":t.pythrootList,"profit-list":t.profitList,status:t.timeStatus,"time-status":t.timeStatus,onClick:s=>{return i=t.id,void g.push({name:"activityDetail",params:{id:String(i)}});var i}},null,8,["cover-img-src","title","location","start-time","end-time","participants","pythroot-list","profit-list","status","time-status","onClick"]))),128))]),_:1})]),_:1})}}});export{g as default};
