import{d as e,H as a,c as r,w as t,r as s,a as o,b as n,e as c,S as l,aJ as i,C as m}from"./index-BAYT1_GE.js";import{_ as u}from"./wd-card.C5R0oOJ3.js";import{_ as d}from"./wd-text.DuK9VuY3.js";import{u as f}from"./usePageOptions.aM0KPUm6.js";const p=e({__name:"qrcode",setup(e){const p=a();return f(e=>{const{machineCode:a}=e||{};!async function(e){try{if(!e)throw new Error("没有识别到券码");const a=await i.general.queryQRCodeInfo_1({params:{machineCode:e,manualCode:""}}),{type:r}=a.data||{};if(2!==Number(r))throw new Error("不合法的券码");await i.general.checkoutByQrCode({params:{manualCode:"",machineCode:e}}),m({icon:"success",title:"核销成功"}),p.replace({name:"merchantProfile"})}catch(a){m({icon:"error",title:(null==a?void 0:a.message)||"不合法的券码"}),p.replace({name:"merchantProfile"})}}(a)}),(e,a)=>{const i=l,m=d,f=c,p=u,h=s("layout-default-uni");return o(),r(h,null,{default:t(()=>[n(f,{class:"flex h-screen w-screen flex-col items-center justify-center overflow-hidden p-10"},{default:t(()=>[n(p,{class:"!m-0 !p-0"},{default:t(()=>[n(f,{class:"h-560rpx w-560rpx flex flex-col items-center justify-center gap-10"},{default:t(()=>[n(i,{size:"120rpx"}),n(m,{text:"权益核销中..."})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{p as default};
