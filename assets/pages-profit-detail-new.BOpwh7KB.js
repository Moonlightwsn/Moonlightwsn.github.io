import{d as e,H as l,B as r,p as a,c as s,w as t,r as u,P as o,C as p,a as i,b as n,A as d,e as c,t as v,E as x,D as m,y as f,V as _,W as b,X as h,n as g}from"./index-a6TtsOgc.js";import{_ as y}from"./BannerView.vue_vue_type_script_setup_true_lang.BEJtDK2a.js";import{_ as w,a as S}from"./HtmlCard.vue_vue_type_script_setup_true_lang.DvF9y1LH.js";import{_ as k}from"./Avatar.vue_vue_type_script_setup_true_lang.ex313Ryk.js";import{_ as N}from"./PyText.vue_vue_type_script_setup_true_lang.C4vd1DLX.js";import{_ as j,P as D}from"./profit-detail-card-bg.BjZRkx9V.js";import{_ as I}from"./PyTitle.CL2zNIOD.js";import{o as z}from"./on-chain.ItkuIJXP.js";import{T as C}from"./ticket.Bwxup39T.js";import{u as E}from"./usePageOptions.B-ChW6vP.js";import{f as P}from"./index.CVFvtcrF.js";import"./wd-text.O2Z1f8vu.js";import"./_commonjsHelpers.lGe4XDVY.js";const T="YYYY年MM月DD日 hh时mm分",U=e({__name:"detail-new",setup(e){const U=l(),A=r(null),Y=r(),B=r(),H=r(),M=r();function O(){U.push({name:"evidence",params:{type:"2",id:String(Y.value)}})}E(async e=>{const{id:l,pId:r,type:a}=e||{};if(Y.value=Number(l),B.value=Number(r),"product"===a){A.value="product";const e=await o.appSpu.getSpuDetail({params:{id:B.value}});(null==e?void 0:e.data)&&(M.value=e.data)}else{A.value="order";const e=await o.app.getOrderDetail({params:{orderId:Y.value}});(null==e?void 0:e.data)&&(H.value=e.data)}H.value||M.value||(H.value=void 0,M.value=void 0,p({icon:"error",title:"没有获取到权益详情"}))});const Q=a(()=>{var e,l,r,a,s,t,u;return A.value?"product"===A.value?{productSpuNo:null==(e=M.value)?void 0:e.productNo,productSpuCategoryName:null==(l=M.value)?void 0:l.categoryName,productSpuName:null==(r=M.value)?void 0:r.name,productSpuPicUrl:null==(a=M.value)?void 0:a.picUrl,productSpuIssuedQuantity:null==(s=M.value)?void 0:s.issuedQuantity,issuerName:null==(t=M.value)?void 0:t.issuerName,productSpuDescription:null==(u=M.value)?void 0:u.description,createTime:void 0,expireTime:void 0,chainStatus:void 0,productsIssue:[]}:H.value:null});return(e,l)=>{const r=x,a=c,o=I,p=j,E=m,Y=w,B=N,H=k,M=S,F=y,V=u("layout-default-uni");return i(),s(V,null,{default:t(()=>[n(F,{"custom-class":"h-screen bg-#f5f5f5 pb-32rpx","banner-class":"rounded-b-96rpx overflow-hidden !left-1/2 !translate-x-[-50%] !w-811rpx ","banner-height":"434rpx","banner-src":d("/assets/profit-detail-banner-1aq6fCNd.png")},{default:t(()=>[n(a,{class:"px-36rpx mt-[-346rpx]"},{default:t(()=>{var e;return[n(a,{class:"rounded-20rpx bg-#fff shadow-[0rpx_4rpx_8rpx_0rpx_rgba(203,203,203,0.25)]"},{default:t(()=>[n(a,{class:"h-504rpx rounded-20rpx border-6rpx w-full overflow-hidden border-solid border-transparent"},{default:t(()=>{var e;return[n(r,{src:null==(e=d(Q))?void 0:e.productSpuPicUrl,width:"100%",height:"100%",mode:"aspectFill"},null,8,["src"])]}),_:1}),n(a,{class:"pt-18rpx pb-28rpx px-40rpx flex w-full flex-col"},{default:t(()=>{var e,l;return[n(o,{"custom-class":"!font-600",color:"#37445D","line-height":"normal",size:"34rpx",text:null==(e=d(Q))?void 0:e.productSpuName},null,8,["text"]),n(a,{class:"my-18rpx bg-#E2E2E2 h-2rpx w-full scale-y-50"}),n(a,{class:"gap-16rpx flex flex-col"},{default:t(()=>{var e,l,r,a,t;return[n(p,{label:"权益编号：",value:null==(e=d(Q))?void 0:e.productSpuNo},null,8,["value"]),n(p,{label:"分类：",value:null==(l=d(Q))?void 0:l.productSpuCategoryName},null,8,["value"]),n(p,{label:"发放方：",value:null==(r=d(Q))?void 0:r.issuerName},null,8,["value"]),"order"===d(A)?(i(),s(p,{key:0,label:"发放时间：",value:d(P)(null==(a=d(Q))?void 0:a.createTime,T)},null,8,["value"])):v("",!0),"order"===d(A)?(i(),s(p,{key:1,label:"到期时间：",value:d(P)(null==(t=d(Q))?void 0:t.expireTime,T)},null,8,["value"])):v("",!0)]}),_:1}),1===Number(null==(l=d(Q))?void 0:l.chainStatus)?(i(),s(E,{key:0,class:"mt-20rpx",block:"",plain:"",onClick:O},{default:t(()=>[n(r,{class:"mr-10rpx",width:"24rpx",height:"24rpx",src:d(z)},null,8,["src"]),f("链上信息 ")]),_:1})):v("",!0)]}),_:1})]),_:1}),"order"===d(A)?(i(),s(a,{key:0,class:"mt-38rpx"},{default:t(()=>{var e,l;return[n(a,{class:"gap-8rpx mb-38rpx flex items-center"},{default:t(()=>[n(Y,{src:d(C),width:"38rpx",height:"38rpx"},null,8,["src"]),n(o,{text:"关联数根",color:"#37445D",size:"27rpx"})]),_:1}),((null==(e=d(Q))?void 0:e.productsIssue)||[]).length<=0?(i(),s(a,{key:0,class:"mb-38rpx flex justify-center"},{default:t(()=>[n(B,{text:"无关联数根"})]),_:1})):(i(!0),_(b,{key:1},h((null==(l=d(Q))?void 0:l.productsIssue)||[],e=>(i(),s(a,{key:e.id,class:"mb-8rpx flex flex-nowrap",onClick:l=>{var r;(r=e.productId)&&U.push({name:"pythrootDetail",params:{pId:String(r),type:"product"}})}},{default:t(()=>[n(a,{class:"w-76rpx flex-shrink-0"}),n(a,{class:"h-162rpx pt-16rpx pb-24rpx pl-76rpx pr-56rpx relative flex flex-grow",style:g({backgroundImage:`url(${d(D)})`,backgroundSize:"100% 100%"})},{default:t(()=>[e.picUrl?(i(),s(H,{key:0,"custom-class":"!absolute top-0 left-0 translate-x-[-50%] bg-#b8e1ff flex-shrink-0","border-color":"#29A2FB","border-size":"2rpx",border:"",size:"152rpx",src:e.picUrl},null,8,["src"])):v("",!0),n(a,{class:"border-2rpx border-#E3E3E3 mx-48rpx scale-x-1/2 h-full w-0 flex-shrink-0 border-dashed"}),n(a,{class:"gap-4rpx flex h-full flex-grow flex-col"},{default:t(()=>[n(o,{"custom-class":"mb-4rpx",text:e.name,color:"#5D4037",size:"27rpx"},null,8,["text"]),n(p,{"label-class":"!font-normal",label:"发行方：","label-size":"24rpx","label-color":"#5D4037","value-class":"!font-200",value:e.issuerName,"value-lines":1},null,8,["value"]),n(p,{"label-class":"!font-normal",label:"发行量：","label-size":"24rpx","label-color":"#5D4037","value-class":"!font-200",value:String(e.issuedQuantity),"value-lines":1},null,8,["value"])]),_:2},1024)]),_:2},1032,["style"])]),_:2},1032,["onClick"]))),128))]}),_:1})):v("",!0),n(M,{"custom-class":"mx-8rpx mt-32rpx",title:"详细介绍","dompurify-html":(null==(e=d(Q))?void 0:e.productSpuDescription)||"<p>暂无详细介绍</p>"},null,8,["dompurify-html"])]}),_:1})]),_:1},8,["banner-src"])]),_:1})}}});export{U as default};
