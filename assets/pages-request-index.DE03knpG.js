import{_ as e,a as t}from"./wd-cell.CNHILqSx.js";import{d as a,C as r,a as s,w as o,q as n,o as l,e as d,i as c,h as i,s as u,F as f,v as m,t as g,_ as p,u as x,f as _,D as k}from"./index-Do2xWgh4.js";import{_ as v}from"./DemoBlock.vue_vue_type_script_setup_true_lang.MyriIwg6.js";import{t as b,a as h,o as y,q as E,r as w,v as S,w as C,x as R,y as U,P as A,z as T,u as j,A as P,B as q,C as H,b as O,D as z,E as N,f as I,F as K,c as D,s as W,G as F,e as L,H as B,I as Q,J as G,K as M,L as V,g as J,N as $,p as X,O as Y,Q as Z,R as ee,S as te,M as ae,n as re,T as se,U as oe,$ as ne,V as le,W as de}from"./alova.esm.BwIAK7PD.js";const ce=(e,t)=>{let a=oe;return function(...r){const s=e.bind(this,...r),o=J(t)?t:t(...r);a&&te(a),o>0?a=W(s,o):s()}};var ie,ue;(ue=ie||(ie={}))[ue.USE_REQUEST=1]="USE_REQUEST",ue[ue.USE_WATCHER=2]="USE_WATCHER",ue[ue.USE_FETCHER=3]="USE_FETCHER";const fe=w("useRequest"),me=w("useWatcher"),ge=w("useFetcher"),pe=e=>({[ie.USE_REQUEST]:fe,[ie.USE_WATCHER]:me,[ie.USE_FETCHER]:ge}[e]),xe="success",_e="error",ke="complete";class ve{constructor(e,t){this.method=e,this.args=t}clone(){return{...this}}static spawn(e,t){return L(ve,e,t)}}class be extends ve{constructor(e,t,a){super(e.method,e.args),this.data=t,this.fromCache=a}}class he extends ve{constructor(e,t){super(e.method,e.args),this.error=t}}class ye extends ve{constructor(e,t,a,r,s){super(e.method,e.args),this.status=t,this.data=a,this.fromCache="error"!==t&&r,this.error=s}}const Ee=(e,t)=>t(),we={};function Se(e,t,a=[]){const r=pe(e.ht);let s=E(t,r,a);const{fs:o,ht:n,c:l}=e,{loading:d,data:c,error:i}=o,u=n===ie.USE_FETCHER,{force:f=h,middleware:m=Ee}=l,g=S(s),{id:p}=g,x=R(s),{abortLast:_=b}=l,k=!e.m;return e.m=s,(async()=>{let g=re,v=h,y=X(j),E=re,w=re;const S=await Y(s);let C=()=>!!S,R=h;u||(((e,t,a)=>{const r=we[e]=we[e]||{};r[t]||(r[t]=L(Set)),r[t].add(a)})(p,x,e),g=()=>((e,t,a)=>{const r=we[e],s=r[t];r&&s&&(a?s.delete(a):s.clear(),0===s.size&&se(r,t))})(p,x,e));const A=t=>{v=b;const{force:r=f,method:n=s}=t||{},l=P(r,[L(ve,s,a)]),c=e=>({loaded:t,total:a})=>{o[e].v={loaded:t,total:a}};s=n,e.rf[x]=g,R||(d.v=!!l||!S);const{downloading:i,uploading:u}=e.ro.trackedKeys;return E=i?s.onDownload(c("downloading")):E,w=u?s.onUpload(c("uploading")):w,y=s.send(l),C=()=>s.fromCache||h,y},T={method:s,cachedResponse:S,config:l,abort:()=>s.abort()},q=()=>n!==ie.USE_WATCHER||!_||e.m===s,H=(e=b)=>{e&&k&&(d.v=h),R=e},O=m(u?{...T,args:a,fetch:(t,...a)=>(((e,t)=>{e(U(t,ae),"expected a method instance.")})(r,t),Se(e,t,a)),proxyStates:Z(o,"data"),controlLoading:H}:{...T,args:a,send:(...a)=>Se(e,t,a),proxyStates:o,controlLoading:H},A);let z=j;const N=ve.spawn(s,a);try{const t=await O,a=t=>(u?e.c.updateState!==h&&I(((e,t)=>{const a=we[e]||{};return a[t]?Array.from(a[t]):[]})(p,x),e=>{e.fs.data.v=t}):q()&&(c.v=t),q()&&(i.v=j,!R&&(d.v=h),e.em.emit(xe,L(be,N,t,C())),e.em.emit(ke,L(ye,N,xe,t,C(),j))),t);z=t!==j?a(t):v?await F(y,a,()=>a(j)):j,!v&&!R&&(d.v=h)}catch(K){throw q()&&(i.v=K,!R&&(d.v=h),e.em.emit(_e,L(he,N,K)),e.em.emit(ke,L(ye,N,_e,j,C(),K))),K}return E(),w(),z})()}const Ce=e=>e.current;function Re(e,t,a,r,s=h,o,n=0){var l;a={...a};let d=!!s,c=j;if(s)try{const r=E(t,pe(e)),s=S(r),o=s.l1Cache.get(C(s.id,R(r)));if(o&&!U(o,A)){const[e,t]=o;(!t||t>T())&&(c=e)}d=!!P(null!==(l=a.force)&&void 0!==l?l:h)||!c}catch(he){}const{create:i,effectRequest:u,ref:f,objectify:m,exposeProvider:g,transformState2Proxy:p,__referingObj:x}=function(e,t={trackedKeys:{},bindError:h,initialRequest:h,...q()}){const a=t=>e.ref?e.ref(t):{current:t};t=a(t).current;const r=a=>(e.export||ne)(a,t),s=t=>{if(!O(e.memorize))return t;const a=e.memorize(t);return a.memorized=b,a},{dehydrate:o}=e,n=(a,r,s)=>a!==o(r,s,t)&&t.trackedKeys[s]&&e.update(a,r,s,t),l=e=>M(e,e=>U(e,V)?e.e:e),d=[],c={};return{create:(a,s)=>(G(d,s),L(B,e.create(a,s,t),s,e=>o(e,s,t),r,(e,t)=>n(t,e,s))),computed:(a,s,n)=>(I(s,e=>{e.k&&(c[e.k]=b)}),L(V,e.computed(a,l(s),n,t),n,e=>o(e,n,t),r)),effectRequest:a=>e.effectRequest(a,t),ref:a,watch:(a,r)=>e.watch(l(a),r,t),onMounted:a=>e.onMounted(a,t),onUnmounted:a=>e.onUnmounted(a,t),memorize:s,__referingObj:t,exposeProvider:e=>{const a={},r={},o=[];for(const n in e){const l=e[n];if(O(l)&&!t.trackedKeys[n])a[n]=n.startsWith("on")?(...e)=>(l(...e),m):l.memorized?l:s(l);else{Q(["uploading","downloading"],n)||n.startsWith("__")||G(o,n);const e=U(l,V);e&&(r[n]=l.s),le.defineProperty(a,n,{get:()=>(t.trackedKeys[n]=b,e?l.e:l),set:re,enumerable:b,configurable:b})}}const{update:l,__proxyState:i}=a;t.trackedKeys={...c},t.bindError=h;const{then:u}=a,f={__referingObj:t,update:s(e=>{ee(e).forEach(t=>{Q(d,t)?n(e[t],r[t],t):t in a&&O(l)&&l({[t]:e[t]})})}),__proxyState:s(a=>Q(d,a)&&U(e[a],V)?(t.trackedKeys[a]=b,e[a]):i(a)),then(e,a){I(o,e=>{t.trackedKeys[e]=b});const r=()=>{se(m,"then"),e(m)};O(u)?u(r,a):r()}},m=y(a,f);return m},objectify:(e,t)=>e.reduce((e,a)=>(e[a.k]=t?a[t]:a,e),{}),transformState2Proxy:(e,a)=>L(B,e,a,e=>o(e,a,t),r,(e,t)=>n(t,e,a))}}(H(),a.__referingObj),_={total:0,loaded:0},{managedStates:k={}}=a,v=((e,t)=>{const a={};for(const r in e)a[r]=t(e[r],r,e);return a})(k,(e,t)=>p(e,t)),w=i(null!=c?c:O(r)?r():r,"data"),X=i(d,"loading"),Y=i(j,"error"),Z=i({..._},"downloading"),te=i({..._},"uploading"),ae=m([w,X,Y,Z,te]),oe=z(),ie=Ce(f(((e,t,a,r)=>({m:j,rf:{},fs:{},em:a,ht:e,c:t,ro:r,ms:{}}))(e,a,oe,x)));ie.fs=ae,ie.em=oe,ie.c=a,ie.ms={...ae,...v};const ue=(e=t,a)=>Se(ie,e,a),fe=f(j),me=f(h),ge=Ce(f(N())),ve=(e=x,t)=>{ge(()=>{$.ssr&&!Ce(fe)||(x.initialRequest=me.current=b,F(ue(t),()=>{var e;null===(e=Ce(fe))||void 0===e||e.resolve()},t=>{var a;if(!e.bindError&&!e.trackedKeys.error&&!Ce(fe))throw t;null===(a=Ce(fe))||void 0===a||a.reject(t)}))})};f(ce((e,t,a)=>ve(t,a),e=>J(e)?de(n)?n[e]:n:0)),u({handler:()=>ve(x),removeStates:()=>{I(K(ie.rf),e=>e())},frontStates:{...ae,...v},watchingStates:o,immediate:null!=s?s:b});const be=g({...m([w,X,Y,Z,te]),abort:()=>ie.m&&ie.m.abort(),send:(e,t)=>ue(t,e),onSuccess(e){oe.on(xe,e)},onError(e){x.bindError=b,oe.on(_e,e)},onComplete(e){oe.on(ke,e)},then(e,t){const{promise:a,resolve:r,reject:s}=D();fe.current={resolve:r,reject:s},W(()=>{!me.current&&r()},10),F(a,()=>{e(be)},t)}});return be}function Ue(e,t={}){const{immediate:a=b,initialData:r}=t,s=Re(ie.USE_REQUEST,e,t,r,!!a),{send:o}=s;return y(s,{send:(...e)=>o(e)})}var Ae,Te,je,Pe;(Te=Ae||(Ae={}))[Te.CONNECTING=0]="CONNECTING",Te[Te.OPEN=1]="OPEN",Te[Te.CLOSED=2]="CLOSED",(Pe=je||(je={})).Open="open",Pe.Error="error",Pe.Message="message",Pe.Close="close";const qe=a({__name:"index",setup(a){const b=r(),h=[{icon:"⚡",title:"简单易用",description:"观看视频5分钟上手",details:"极简的API设计，直观的使用方式，让开发者快速掌握并投入使用",color:"blue"},{icon:"🔧",title:"完美兼容",description:"兼容你最喜欢的技术栈",details:"支持Vue、React、Angular等主流框架，以及各种HTTP客户端库",color:"green"},{icon:"🚀",title:"高性能模块",description:"20+ 高性能的业务模块",details:"提供分页、实时数据、文件上传下载等开箱即用的高性能解决方案",color:"purple"},{icon:"🔗",title:"OpenAPI 解决方案",description:"更先进的 openAPI 解决方案",details:"在代码中和API信息高效交互，自动生成类型定义和请求函数",color:"orange"},{icon:"📦",title:"请求共享缓存",description:"请求共享和响应缓存",details:"智能的请求去重和响应缓存机制，显著提升应用性能",color:"cyan"},{icon:"🛡️",title:"类型安全",description:"完整的 TypeScript 支持",details:"从请求到响应的全链路类型安全，减少运行时错误",color:"red"}],{data:y,loading:E,error:w,send:S}=Ue((e="available")=>Apis.pet.findPetsByStatus({params:{status:e}}),{immediate:!1}).onError(e=>{var t;b.error((null==(t=e.error)?void 0:t.message)||"获取宠物列表失败")}),{data:C,loading:R,error:U,send:A}=Ue((e,t)=>Apis.user.loginUser({params:{username:e,password:t}}),{immediate:!1}).onError(e=>{var t;b.error((null==(t=e.error)?void 0:t.message)||"用户登录失败")});function T(){S("available")}function j(){A("testuser","testpass")}function P(e){window.open(e,"_blank")}return(a,r)=>{const b=c,S=v,A=p,q=k,H=t,O=e,z=n("layout-default-uni");return l(),s(z,null,{default:o(()=>[d(b,{class:"min-h-screen bg-gray-100 py-3 dark:bg-[var(--wot-dark-background)]"},{default:o(()=>[d(b,{class:"mx-3 mb-3"},{default:o(()=>[d(b,{class:"rounded-3 bg-white px-5 py-8 text-center dark:bg-[var(--wot-dark-background2)]"},{default:o(()=>[d(b,{class:"mb-3 text-10"},{default:o(()=>[i(" 🌐 ")]),_:1}),d(b,{class:"mb-2 text-6 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]"},{default:o(()=>[i(" Alova 网络请求 ")]),_:1}),d(b,{class:"mb-2 text-3.5 text-gray-600 leading-relaxed dark:text-[var(--wot-dark-color2)]"},{default:o(()=>[i(" 极致高效的请求工具集 ")]),_:1}),d(b,{class:"text-3 text-gray-500 leading-relaxed dark:text-[var(--wot-dark-color2)]"},{default:o(()=>[i(" alova完美兼容你最喜欢的HTTP client和UI框架，快速开发客户端和服务的应用的业务逻辑，同时让API信息与代码进行交互，像虫洞一样拉近后端协作距离，极致高效地集成你的APIs ")]),_:1})]),_:1})]),_:1}),d(S,{title:"Alova 核心特性",transparent:""},{default:o(()=>[d(b,{class:"grid grid-cols-2 gap-3"},{default:o(()=>[(l(),u(f,null,m(h,e=>d(b,{key:e.title,class:"rounded-2 bg-white p-3 dark:bg-[var(--wot-dark-background2)]"},{default:o(()=>[d(b,{class:"mb-2 flex items-center"},{default:o(()=>[d(b,{class:"mr-2 text-5"},{default:o(()=>[i(g(e.icon),1)]),_:2},1024),d(b,{class:"flex-1"},{default:o(()=>[d(b,{class:"text-3.5 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]"},{default:o(()=>[i(g(e.title),1)]),_:2},1024),d(b,{class:"text-2.5 text-gray-600 dark:text-[var(--wot-dark-color2)]"},{default:o(()=>[i(g(e.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)),64))]),_:1})]),_:1}),d(S,{title:"useRequest Hook 演示",transparent:""},{default:o(()=>[d(b,{class:"space-y-3"},{default:o(()=>[d(b,{class:"rounded-2 bg-white p-4 dark:bg-[var(--wot-dark-background2)]"},{default:o(()=>[d(b,{class:"mb-3 flex items-center"},{default:o(()=>[d(b,{class:"mr-2 text-5"},{default:o(()=>[i(" 🐾 ")]),_:1}),d(b,{class:"text-4 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]"},{default:o(()=>[i(" 宠物列表请求 ")]),_:1})]),_:1}),d(b,{class:"mb-3 text-3 text-gray-600 leading-relaxed dark:text-[var(--wot-dark-color2)]"},{default:o(()=>[i(" 使用 useRequest 获取宠物列表，支持参数传递和错误处理 ")]),_:1}),d(b,{class:"mb-3"},{default:o(()=>[d(A,{type:"primary",block:"",loading:x(E),onClick:T},{default:o(()=>[i(" 获取宠物列表 ")]),_:1},8,["loading"])]),_:1}),d(b,{class:"space-y-2"},{default:o(()=>[x(E)?(l(),s(b,{key:0,class:"flex items-center text-3 text-blue-600"},{default:o(()=>[d(q,{name:"loading",size:"14px",class:"mr-1"}),i(" 正在加载宠物数据... ")]),_:1})):_("",!0),x(w)?(l(),s(b,{key:1,class:"text-3 text-red-600"},{default:o(()=>[i(" ❌ 请求失败: "+g(x(w).message),1)]),_:1})):_("",!0),x(y)&&!x(E)?(l(),s(b,{key:2,class:"text-3 text-green-600"},{default:o(()=>[i(" ✅ 成功获取 "+g(x(y).length)+" 只宠物数据 ",1)]),_:1})):_("",!0)]),_:1}),d(b,{class:"mt-3 rounded-2 bg-gray-50 p-3 dark:bg-[var(--wot-dark-background3)]"},{default:o(()=>[d(b,{class:"mb-2 text-3 text-gray-700 font-bold dark:text-[var(--wot-dark-color)]"},{default:o(()=>[i(" 代码示例: ")]),_:1}),d(b,{class:"text-2.5 text-gray-600 leading-relaxed font-mono dark:text-[var(--wot-dark-color2)]"},{default:o(()=>[i(" const { data, loading, send } = useRequest(\\n   (status) => Apis.pet.findPetsByStatus({ params: { status } }),\\n   { immediate: false }\\n ).onError((error) => { ... }) ")]),_:1})]),_:1})]),_:1}),d(b,{class:"rounded-2 bg-white p-4 dark:bg-[var(--wot-dark-background2)]"},{default:o(()=>[d(b,{class:"mb-3 flex items-center"},{default:o(()=>[d(b,{class:"mr-2 text-5"},{default:o(()=>[i(" 👤 ")]),_:1}),d(b,{class:"text-4 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]"},{default:o(()=>[i(" 用户登录请求 ")]),_:1})]),_:1}),d(b,{class:"mb-3 text-3 text-gray-600 leading-relaxed dark:text-[var(--wot-dark-color2)]"},{default:o(()=>[i(" 演示多参数传递和POST请求处理 ")]),_:1}),d(b,{class:"mb-3"},{default:o(()=>[d(A,{type:"warning",block:"",loading:x(R),onClick:j},{default:o(()=>[i(" 模拟用户登录 ")]),_:1},8,["loading"])]),_:1}),d(b,{class:"space-y-2"},{default:o(()=>[x(R)?(l(),s(b,{key:0,class:"flex items-center text-3 text-blue-600"},{default:o(()=>[d(q,{name:"loading",size:"14px",class:"mr-1"}),i(" 正在登录中... ")]),_:1})):_("",!0),x(U)?(l(),s(b,{key:1,class:"text-3 text-red-600"},{default:o(()=>[i(" ❌ 登录失败: "+g(x(U).message),1)]),_:1})):_("",!0),x(C)&&!x(R)?(l(),s(b,{key:2,class:"text-3 text-green-600"},{default:o(()=>[i(" ✅ 登录成功！ ")]),_:1})):_("",!0)]),_:1}),d(b,{class:"mt-3 rounded-2 bg-gray-50 p-3 dark:bg-[var(--wot-dark-background3)]"},{default:o(()=>[d(b,{class:"mb-2 text-3 text-gray-700 font-bold dark:text-[var(--wot-dark-color)]"},{default:o(()=>[i(" 代码示例: ")]),_:1}),d(b,{class:"text-2.5 text-gray-600 leading-relaxed font-mono dark:text-[var(--wot-dark-color2)]"},{default:o(()=>[i(" const { data, loading, send } = useRequest(\\n   (username, password) => Apis.user.loginUser({\\n     params: { username, password }\\n   }),\\n   { immediate: false }\\n ).onError((error) => { ... }) ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),d(S,{title:"相关链接",transparent:""},{default:o(()=>[d(O,{border:"","custom-class":"rounded-2! overflow-hidden"},{default:o(()=>[d(H,{title:"📚 Alova 官方文档",value:"alova.js.org","is-link":"",onClick:r[0]||(r[0]=e=>P("https://alova.js.org/"))}),d(H,{title:"🐙 GitHub 仓库",value:"alovajs/alova","is-link":"",onClick:r[1]||(r[1]=e=>P("https://github.com/alovajs/alova"))}),d(H,{title:"📖 uni-app 文档",value:"网络请求","is-link":"",onClick:r[2]||(r[2]=e=>P("https://uniapp.dcloud.net.cn/api/request/request.html"))}),d(H,{title:"🎯 Alova Hooks",value:"请求策略","is-link":"",onClick:r[3]||(r[3]=e=>P("https://alova.js.org/zh-CN/tutorial/client/strategy/"))}),d(H,{title:"💡 最佳实践",value:"使用指南","is-link":"",onClick:r[4]||(r[4]=e=>P("https://alova.js.org/zh-CN/tutorial/project/best-practice/"))})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{qe as default};
