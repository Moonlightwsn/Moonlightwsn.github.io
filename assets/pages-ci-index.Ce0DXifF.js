import{d as e,C as t,m as a,a as r,w as d,q as l,o,e as n,i as s,h as i,s as c,F as u,v as b,u as k,t as p,g,D as x,E as f,G as m,I as _}from"./index-CQJqgjxr.js";import{_ as w,a as y}from"./wd-cell.CGONRzRX.js";import{_ as v}from"./DemoBlock.vue_vue_type_script_setup_true_lang.CYYVzenY.js";const h=e({__name:"index",setup(e){const{success:h}=t(),C=a('{\n  "weixin": {\n    "appid": "微信小程序appid",\n    "privateKeyPath": "key/private.appid.key",\n    "projectPath": "dist/build/mp-weixin"\n  },\n  "alipay": {\n    "appid": "支付宝小程序appid",\n    "toolId": "支付宝开放平台工具ID",\n    "privateKey": "私钥文本内容",\n    "projectPath": "dist/build/mp-alipay",\n    "autoincrement": true\n  },\n  "dd": {\n    "appid": "钉钉小程序appid",\n    "token": "钉钉开发者后台的 API Token",\n    "projectPath": "dist/build/mp-alipay",\n    "autoincrement": true\n  },\n  "version": "0.0.1",\n  "desc": "版本描述"\n}'),j=a('{\n  "scripts": {\n    "upload:weixin": "minici --platform weixin",\n    "upload:alipay": "minici --platform alipay",\n    "upload:dd": "minici --platform dd",\n    "upload:mp-weixin": "uni build -p mp-weixin && minici --platform weixin",\n    "upload:mp-alipay": "uni build -p mp-alipay && minici --platform alipay",\n    "upload:mp-dingtalk": "uni build -p mp-dingtalk && minici --platform dd"\n  }\n}'),I=a([{icon:"📱",title:"多平台支持",desc:"支持微信、支付宝、钉钉小程序的上传"},{icon:"🔢",title:"版本管理",desc:"支持指定版本号和版本号自增"},{icon:"⚙️",title:"简单配置",desc:"通过配置文件轻松管理多平台参数"},{icon:"🔄",title:"CI/CD集成",desc:"完美集成持续集成和持续部署流程"},{icon:"🛠️",title:"命令行工具",desc:"支持全局和局部安装，灵活使用"},{icon:"📦",title:"打包上传",desc:"支持打包和上传命令组合使用"}]),z=a([{name:"weixin",title:"微信小程序",icon:"💚",color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200",features:["支持企业微信","CI机器人选择","编译设置","代码压缩保护"]},{name:"alipay",title:"支付宝小程序",icon:"💙",color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",features:["多终端支持","版本号自增","私钥认证","开放平台集成"]},{name:"dd",title:"钉钉小程序",icon:"💜",color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200",features:["企业应用","版本号自增","Token认证","多应用类型"]}]);function D(e){m({data:e,showToast:!1,success:()=>{_(),h({msg:"代码已复制到剪贴板"})}})}function P(e){window.open(e,"_blank")}return(e,t)=>{const a=s,m=v,_=g,h=x,q=y,T=w,E=l("layout-default-uni");return o(),r(E,null,{default:d(()=>[n(a,{class:"min-h-screen bg-gray-100 py-3 dark:bg-[var(--wot-dark-background)]"},{default:d(()=>[n(a,{class:"mx-3 mb-3"},{default:d(()=>[n(a,{class:"rounded-3 bg-white px-5 py-8 text-center dark:bg-[var(--wot-dark-background2)]"},{default:d(()=>[n(a,{class:"mb-3 text-10"},{default:d(()=>[i(" 🚀 ")]),_:1}),n(a,{class:"mb-2 text-6 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]"},{default:d(()=>[i(" uni-mini-ci ")]),_:1}),n(a,{class:"mb-2 text-3.5 text-gray-600 leading-relaxed dark:text-[var(--wot-dark-color2)]"},{default:d(()=>[i(" 小程序持续集成的插件 ")]),_:1}),n(a,{class:"text-3 text-gray-500 dark:text-[var(--wot-dark-color2)]"},{default:d(()=>[i(" 支持上传微信、企业微信、钉钉、支付宝平台的小程序 ")]),_:1})]),_:1})]),_:1}),n(m,{title:"核心特性",transparent:""},{default:d(()=>[n(a,{class:"grid grid-cols-2 gap-3"},{default:d(()=>[(o(!0),c(u,null,b(k(I),e=>(o(),r(a,{key:e.title,class:"rounded-2 bg-white p-4 text-center dark:bg-[var(--wot-dark-background2)]"},{default:d(()=>[n(a,{class:"mb-2 text-6"},{default:d(()=>[i(p(e.icon),1)]),_:2},1024),n(a,{class:"mb-1 text-3.5 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]"},{default:d(()=>[i(p(e.title),1)]),_:2},1024),n(a,{class:"text-3 text-gray-600 leading-snug dark:text-[var(--wot-dark-color2)]"},{default:d(()=>[i(p(e.desc),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),n(m,{title:"安装方式",transparent:""},{default:d(()=>[n(a,{class:"space-y-4"},{default:d(()=>[n(a,{class:"rounded-2 bg-white p-4 dark:bg-[var(--wot-dark-background2)]"},{default:d(()=>[n(a,{class:"mb-3 text-4 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]"},{default:d(()=>[i(" 全局安装 ")]),_:1}),n(a,{class:"mb-3 text-3 text-gray-600 dark:text-[var(--wot-dark-color2)]"},{default:d(()=>[i(" 推荐在开发环境中全局安装，方便在任何项目中使用 ")]),_:1}),n(a,{class:"space-y-2"},{default:d(()=>[n(a,{class:"flex items-center justify-between border border-gray-200 rounded-2 bg-gray-50 p-3 dark:border-[var(--wot-dark-border)] dark:bg-[var(--wot-dark-background3)]",onClick:t[0]||(t[0]=e=>D("npm i uni-mini-ci -g"))},{default:d(()=>[n(_,{class:"flex-1 text-3 text-gray-700 font-mono dark:text-[var(--wot-dark-color)]"},{default:d(()=>[i(" npm i uni-mini-ci -g ")]),_:1}),n(h,{name:"copy",size:"16px",color:"#666"})]),_:1})]),_:1})]),_:1}),n(a,{class:"rounded-2 bg-white p-4 dark:bg-[var(--wot-dark-background2)]"},{default:d(()=>[n(a,{class:"mb-3 text-4 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]"},{default:d(()=>[i(" 局部安装 ")]),_:1}),n(a,{class:"mb-3 text-3 text-gray-600 dark:text-[var(--wot-dark-color2)]"},{default:d(()=>[i(" 在项目中作为开发依赖安装，适合团队协作 ")]),_:1}),n(a,{class:"space-y-2"},{default:d(()=>[n(a,{class:"flex items-center justify-between border border-gray-200 rounded-2 bg-gray-50 p-3 dark:border-[var(--wot-dark-border)] dark:bg-[var(--wot-dark-background3)]",onClick:t[1]||(t[1]=e=>D("npm i uni-mini-ci --save-dev"))},{default:d(()=>[n(_,{class:"flex-1 text-3 text-gray-700 font-mono dark:text-[var(--wot-dark-color)]"},{default:d(()=>[i(" npm i uni-mini-ci --save-dev ")]),_:1}),n(h,{name:"copy",size:"16px",color:"#666"})]),_:1}),n(a,{class:"flex items-center justify-between border border-gray-200 rounded-2 bg-gray-50 p-3 dark:border-[var(--wot-dark-border)] dark:bg-[var(--wot-dark-background3)]",onClick:t[2]||(t[2]=e=>D("pnpm add uni-mini-ci -D"))},{default:d(()=>[n(_,{class:"flex-1 text-3 text-gray-700 font-mono dark:text-[var(--wot-dark-color)]"},{default:d(()=>[i(" pnpm add uni-mini-ci -D ")]),_:1}),n(h,{name:"copy",size:"16px",color:"#666"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n(m,{title:"配置文件",transparent:""},{default:d(()=>[n(a,{class:"rounded-2 bg-white p-4 dark:bg-[var(--wot-dark-background2)]"},{default:d(()=>[n(a,{class:"mb-3 text-4 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]"},{default:d(()=>[i(" .minicirc 配置文件 ")]),_:1}),n(a,{class:"mb-3 text-3 text-gray-600 leading-relaxed dark:text-[var(--wot-dark-color2)]"},{default:d(()=>[i(" 在项目根目录创建 "),n(_,{class:"rounded bg-gray-100 px-1 font-mono dark:bg-[var(--wot-dark-background3)]"},{default:d(()=>[i(" .minicirc ")]),_:1}),i(" 文件，配置各平台的上传参数 ")]),_:1}),n(a,{class:"mb-3 border border-gray-200 rounded-2 bg-gray-50 p-3 dark:border-[var(--wot-dark-border)] dark:bg-[var(--wot-dark-background3)]",onClick:t[3]||(t[3]=e=>D(k(C)))},{default:d(()=>[n(a,{class:"mb-2 flex items-center justify-between"},{default:d(()=>[n(_,{class:"text-3 text-gray-700 font-bold dark:text-[var(--wot-dark-color)]"},{default:d(()=>[i(" 配置示例: ")]),_:1}),n(h,{name:"copy",size:"16px",color:"#666"})]),_:1}),n(a,{class:"max-h-60 overflow-y-auto"},{default:d(()=>[f("pre",{class:"whitespace-pre-wrap text-2.5 text-gray-600 leading-relaxed font-mono dark:text-[var(--wot-dark-color2)]"},p(k(C)),1)]),_:1})]),_:1}),n(a,{class:"border border-orange-200 rounded-2 bg-orange-50 p-3 dark:bg-orange-900/20"},{default:d(()=>[n(a,{class:"mb-2 text-3.5 text-orange-700 font-bold dark:text-orange-300"},{default:d(()=>[i(" 💡 配置说明 ")]),_:1}),n(a,{class:"text-3 text-orange-600 leading-relaxed space-y-1 dark:text-orange-200"},{default:d(()=>[n(a,null,{default:d(()=>[i("• version: 上传版本号，不传时默认读取 package.json 的 version 字段")]),_:1}),n(a,null,{default:d(()=>[i("• desc: 上传时的描述信息")]),_:1}),n(a,null,{default:d(()=>[i("• autoincrement: 版本号自增，建议测试环境开启")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n(m,{title:"支持平台",transparent:""},{default:d(()=>[n(a,{class:"space-y-3"},{default:d(()=>[(o(!0),c(u,null,b(k(z),e=>(o(),r(a,{key:e.name,class:"rounded-2 bg-white p-4 dark:bg-[var(--wot-dark-background2)]"},{default:d(()=>[n(a,{class:"mb-3 flex items-center"},{default:d(()=>[n(a,{class:"mr-2 text-6"},{default:d(()=>[i(p(e.icon),1)]),_:2},1024),n(a,{class:"text-4 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]"},{default:d(()=>[i(p(e.title),1)]),_:2},1024)]),_:2},1024),n(a,{class:"grid grid-cols-2 mb-3 gap-2"},{default:d(()=>[(o(!0),c(u,null,b(e.features,e=>(o(),r(a,{key:e,class:"rounded bg-gray-100 px-2 py-1 text-center text-2.5 text-gray-600 dark:bg-[var(--wot-dark-background3)] dark:text-[var(--wot-dark-color2)]"},{default:d(()=>[i(p(e),1)]),_:2},1024))),128))]),_:2},1024),n(a,{class:"flex items-center justify-between border border-gray-200 rounded-2 bg-gray-50 p-3 dark:border-[var(--wot-dark-border)] dark:bg-[var(--wot-dark-background3)]",onClick:t=>D(`minici --platform ${e.name}`)},{default:d(()=>[n(_,{class:"flex-1 text-3 text-gray-700 font-mono dark:text-[var(--wot-dark-color)]"},{default:d(()=>[i(" minici --platform "+p(e.name),1)]),_:2},1024),n(h,{name:"copy",size:"16px",color:"#666"})]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1}),n(m,{title:"添加命令",transparent:""},{default:d(()=>[n(a,{class:"rounded-2 bg-white p-4 dark:bg-[var(--wot-dark-background2)]"},{default:d(()=>[n(a,{class:"mb-3 text-4 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]"},{default:d(()=>[i(" package.json 脚本配置 ")]),_:1}),n(a,{class:"mb-3 text-3 text-gray-600 leading-relaxed dark:text-[var(--wot-dark-color2)]"},{default:d(()=>[i(" 在 package.json 中添加上传脚本，支持单独上传和打包上传组合 ")]),_:1}),n(a,{class:"mb-3 border border-gray-200 rounded-2 bg-gray-50 p-3 dark:border-[var(--wot-dark-border)] dark:bg-[var(--wot-dark-background3)]",onClick:t[4]||(t[4]=e=>D(k(j)))},{default:d(()=>[n(a,{class:"mb-2 flex items-center justify-between"},{default:d(()=>[n(_,{class:"text-3 text-gray-700 font-bold dark:text-[var(--wot-dark-color)]"},{default:d(()=>[i(" 脚本配置: ")]),_:1}),n(h,{name:"copy",size:"16px",color:"#666"})]),_:1}),n(a,{class:"max-h-60 overflow-y-auto"},{default:d(()=>[f("pre",{class:"whitespace-pre-wrap text-2.5 text-gray-600 leading-relaxed font-mono dark:text-[var(--wot-dark-color2)]"},p(k(j)),1)]),_:1})]),_:1}),n(a,{class:"space-y-2"},{default:d(()=>[n(a,{class:"text-3.5 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]"},{default:d(()=>[i(" 使用命令: ")]),_:1}),n(a,{class:"grid grid-cols-1 gap-2"},{default:d(()=>[n(a,{class:"flex items-center justify-between border border-gray-200 rounded-2 bg-gray-50 p-3 dark:border-[var(--wot-dark-border)] dark:bg-[var(--wot-dark-background3)]",onClick:t[5]||(t[5]=e=>D("pnpm upload:weixin"))},{default:d(()=>[n(_,{class:"flex-1 text-3 text-gray-700 font-mono dark:text-[var(--wot-dark-color)]"},{default:d(()=>[i(" pnpm upload:weixin ")]),_:1}),n(h,{name:"copy",size:"16px",color:"#666"})]),_:1}),n(a,{class:"flex items-center justify-between border border-gray-200 rounded-2 bg-gray-50 p-3 dark:border-[var(--wot-dark-border)] dark:bg-[var(--wot-dark-background3)]",onClick:t[6]||(t[6]=e=>D("pnpm upload:mp-weixin"))},{default:d(()=>[n(_,{class:"flex-1 text-3 text-gray-700 font-mono dark:text-[var(--wot-dark-color)]"},{default:d(()=>[i(" pnpm upload:mp-weixin ")]),_:1}),n(h,{name:"copy",size:"16px",color:"#666"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n(m,{title:"使用步骤",transparent:""},{default:d(()=>[n(a,{class:"space-y-3"},{default:d(()=>[(o(!0),c(u,null,b([{title:"安装插件",desc:"选择全局或局部安装方式",icon:"📦"},{title:"创建配置",desc:"在根目录创建 .minicirc 配置文件",icon:"⚙️"},{title:"配置平台",desc:"填写各平台的 appid、密钥等信息",icon:"🔑"},{title:"添加脚本",desc:"在 package.json 中添加上传命令",icon:"📝"},{title:"执行上传",desc:"运行命令上传到对应平台",icon:"🚀"}],(e,t)=>(o(),r(a,{key:t,class:"rounded-2 bg-white p-4 dark:bg-[var(--wot-dark-background2)]"},{default:d(()=>[n(a,{class:"flex items-center"},{default:d(()=>[n(a,{class:"mr-3 h-8 w-8 flex items-center justify-center rounded-full bg-blue-100 text-3.5 text-blue-600 font-bold dark:bg-blue-900/20 dark:text-blue-400"},{default:d(()=>[i(p(t+1),1)]),_:2},1024),n(a,{class:"mr-2 text-5"},{default:d(()=>[i(p(e.icon),1)]),_:2},1024),n(a,{class:"flex-1"},{default:d(()=>[n(a,{class:"text-3.5 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]"},{default:d(()=>[i(p(e.title),1)]),_:2},1024),n(a,{class:"text-3 text-gray-600 dark:text-[var(--wot-dark-color2)]"},{default:d(()=>[i(p(e.desc),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),n(m,{title:"注意事项",transparent:""},{default:d(()=>[n(a,{class:"space-y-3"},{default:d(()=>[n(a,{class:"border border-red-200 rounded-2 bg-red-50 p-4 dark:bg-red-900/20"},{default:d(()=>[n(a,{class:"mb-2 text-3.5 text-red-700 font-bold dark:text-red-300"},{default:d(()=>[i(" ⚠️ 版本号限制 ")]),_:1}),n(a,{class:"text-3 text-red-600 leading-relaxed dark:text-red-200"},{default:d(()=>[i(" 支付宝和钉钉小程序不支持上传的版本号小于或等于现有版本号。建议测试环境开启 autoincrement 字段，生产环境手动指定版本号。 ")]),_:1})]),_:1}),n(a,{class:"border border-blue-200 rounded-2 bg-blue-50 p-4 dark:bg-blue-900/20"},{default:d(()=>[n(a,{class:"mb-2 text-3.5 text-blue-700 font-bold dark:text-blue-300"},{default:d(()=>[i(" 💡 最佳实践 ")]),_:1}),n(a,{class:"text-3 text-blue-600 leading-relaxed space-y-1 dark:text-blue-200"},{default:d(()=>[n(a,null,{default:d(()=>[i("• 测试环境：开启版本号自增，频繁调试更方便")]),_:1}),n(a,null,{default:d(()=>[i("• 生产环境：手动指定版本号，便于版本管理")]),_:1}),n(a,null,{default:d(()=>[i("• 密钥安全：不要将私钥文件提交到代码仓库")]),_:1}),n(a,null,{default:d(()=>[i("• CI/CD：结合打包命令，实现自动化部署")]),_:1})]),_:1})]),_:1}),n(a,{class:"border border-green-200 rounded-2 bg-green-50 p-4 dark:bg-green-900/20"},{default:d(()=>[n(a,{class:"mb-2 text-3.5 text-green-700 font-bold dark:text-green-300"},{default:d(()=>[i(" 🔒 安全建议 ")]),_:1}),n(a,{class:"text-3 text-green-600 leading-relaxed space-y-1 dark:text-green-200"},{default:d(()=>[n(a,null,{default:d(()=>[i("• 使用环境变量存储敏感信息")]),_:1}),n(a,null,{default:d(()=>[i("• 将配置文件添加到 .gitignore")]),_:1}),n(a,null,{default:d(()=>[i("• 定期更换密钥和 Token")]),_:1}),n(a,null,{default:d(()=>[i("• 限制 CI 机器人权限范围")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n(m,{title:"相关链接",transparent:""},{default:d(()=>[n(T,{border:"","custom-class":"rounded-2! overflow-hidden"},{default:d(()=>[n(q,{title:"📦 NPM 包",value:"uni-mini-ci","is-link":"",onClick:t[7]||(t[7]=e=>P("https://www.npmjs.com/package/uni-mini-ci"))}),n(q,{title:"🐙 GitHub 仓库",value:"源码仓库","is-link":"",onClick:t[8]||(t[8]=e=>P("https://github.com/Moonofweisheng/uni-mini-ci"))}),n(q,{title:"📱 微信小程序 CI",value:"官方文档","is-link":"",onClick:t[9]||(t[9]=e=>P("https://developers.weixin.qq.com/miniprogram/dev/devtools/ci.html"))}),n(q,{title:"💙 支付宝小程序 CI",value:"官方文档","is-link":"",onClick:t[10]||(t[10]=e=>P("https://opendocs.alipay.com/mini/02q29z"))}),n(q,{title:"💜 钉钉小程序 CI",value:"官方文档","is-link":"",onClick:t[11]||(t[11]=e=>P("https://github.com/open-dingtalk/dingtalk-design-cli"))})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{h as default};
