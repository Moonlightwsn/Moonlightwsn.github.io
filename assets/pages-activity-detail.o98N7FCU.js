import{d as e,H as t,B as a,p as r,c as i,w as l,r as n,D as s,J as o,a as u,b as p,A as c,t as d,K as A,e as x,F as v,L as f,M as g,N as h,n as m,y,z as B,v as b,P as I,_ as w}from"./index-Bpal6X9u.js";import{_ as k}from"./DetailView.-s_ogW8F.js";import{_ as S}from"./PyTitle.Dn6RlDza.js";import{_ as j}from"./PyText.vue_vue_type_script_setup_true_lang.1L9IIHvr.js";import{_ as P}from"./PythrootChainSlogan.vue_vue_type_script_setup_true_lang.C2PyDy0h.js";import{u as F}from"./usePageOptions.tLOhYwqs.js";import{a as L}from"./index.DM5hYbMc.js";import"./BannerView.vue_vue_type_script_setup_true_lang.DzP9QOFw.js";import"./wd-tab.qIZ6aAd6.js";import"./wd-card.-vo_KsXs.js";import"./Descriptions.vue_vue_type_script_setup_true_lang.CFQOq7FE.js";import"./wd-col.BoohVz6c.js";import"./wd-divider.Cc4zUyyv.js";import"./wd-text.COOnfa1A.js";const U=w(e({__name:"detail",setup(e){const w=t(),U=a(""),C=a([{label:"活动地址",value:"",icon:"location"},{label:"活动时间",value:"",icon:"time"}]),K=a([{key:"sponsor",title:"主办方信息",content:void 0},{key:"activity-profit",content:[],title:"活动权益"},{key:"introduce",title:"详细介绍",content:""}]),E=a(null),M=a(!1),X=a(),D=r(()=>{var e;if("boolean"!=typeof X.value)return"";if(X.value)return"已参与";const t=Number(null==(e=E.value)?void 0:e.type);return 0===t?"线下扫码":1===t?"签到参与":2===t?"立即领取":""}),q=async()=>{var e;if(!(null==(e=E.value)?void 0:e.id))return void s({icon:"error",title:"活动数据未加载完成"});const{id:t,type:a}=E.value;switch(a){case 0:w.push({name:"scanClient"});break;case 1:w.push({name:"activityAttendance",params:{id:String(t)}});break;case 2:{M.value=!0;const e=await I.app.createActivityAttendance({data:{activityId:E.value.id}}).finally(()=>M.value=!1);0===(null==e?void 0:e.code)&&(s({icon:"success",title:"签到成功"}),X.value=!0);break}}};return F(async e=>{if(null==e?void 0:e.id)try{const{id:t}=e,a=Number.parseInt(t,10);Number.isNaN(a)&&s({icon:"error",title:"无效的活动ID"}),async function(e){var t,a,r,i,l;const n=await I.app.getActivity({params:{id:e}});if(null==n?void 0:n.data){E.value=n.data,U.value=(null==(t=E.value)?void 0:t.name)||U.value;const{startTime:e,endTime:s,address:o}=n.data,u="YYYY年MM月DD日";C.value[0].value=o||"-",C.value[1].value=`${L(e,u)} - ${L(s,u)}`;const p=K.value.find(e=>"sponsor"===e.key);p&&(p.content={title:E.value.sponsorName,avatar:E.value.picUrl,id:E.value.sponsorId});const c=K.value.find(e=>"activity-profit"===e.key);if(c){const e=((null==(a=E.value)?void 0:a.issueVoucher)||[]).map(e=>({id:e.id||String(Date.now()+Math.random()),avatar:e.picUrl,title:e.name||"",type:2})),t=((null==(r=E.value)?void 0:r.issueProduct)||[]).map(e=>({id:e.id||String(Date.now()+Math.random()),avatar:e.picUrl,title:e.name||"",type:1}));c.content=[...t,...e]}const d=K.value.find(e=>"register-condition"===e.key);d&&(d.content=(null==(i=E.value)?void 0:i.registerCondition)||"<p>暂无要求</p>");const A=K.value.find(e=>"introduce"===e.key);A&&(A.content=(null==(l=E.value)?void 0:l.description)||"<p>暂无详细介绍</p>")}else E.value=null,s({icon:"error",title:"没有获取到权益详情"})}(a),async function(e){const t=await I.app.checkActivityAttended({params:{activityId:e}});0===(null==t?void 0:t.code)&&(X.value=t.data||!1)}(a)}catch(t){console.error("获取活动详情失败:",t),s({icon:"error",title:"获取活动详情失败，请稍后重试"})}else s({icon:"error",title:"缺少活动ID参数"})}),(e,t)=>{const a=P,r=b,s=x,I=j,w=v,F=S,L=k,E=n("layout-default-uni"),Q=o("dompurify-html");return u(),i(E,null,{default:l(()=>[p(L,{"card-title":U.value,"card-info":C.value,sections:K.value,"banner-src":c("/assets/activity-detail-banner-DEYrLLOL.png"),"extra-button-text":c(D),"is-btn-show":Boolean(c(D)),"extra-button-props":{loading:M.value,disabled:X.value,type:X.value?"info":"primary"},"banner-height":"420rpx","card-offset":"-80rpx",onOnclick:q},{"banner-front":l(()=>[p(a,{background:"linear-gradient( 90deg, #00FFB2 0%, #AA50FF 50%, #FF7070 100%);"})]),"card-label":l(({item:e})=>[p(s,{class:"gap-20rpx inline-flex items-center"},{default:l(()=>[p(s,{class:"w-36rpx h-36rpx inline-flex items-center justify-center"},{default:l(()=>[p(r,{name:e.icon,size:"location"===e.icon?"36rpx":"28rpx"},null,8,["name","size"])]),_:2},1024),p(I,{text:e.label},null,8,["text"])]),_:2},1024)]),"section-content":l(({sectionItem:e})=>["sponsor"===e.key?(u(),i(s,{key:0,class:"gap-20rpx mt-8rpx flex flex-col"},{default:l(()=>[p(s,{class:"rounded-20rpx p-20rpx gap-18rpx b-2rpx b-[rgba(255,146,88,0.2)] flex items-center"},{default:l(()=>{var t;return[p(s,{class:"w-96rpx h-96rpx bg-#F3F3F5 flex-shrink-0 overflow-hidden rounded-full"},{default:l(()=>{var t;return[p(w,{width:"100%",height:"100%","rounded-full":"",alt:"主办方图片",src:null==(t=e.content)?void 0:t.avatar,mode:"aspectFill"},null,8,["src"])]}),_:2},1024),p(F,{text:null==(t=e.content)?void 0:t.title},null,8,["text"])]}),_:2},1024)]),_:2},1024)):d("",!0),"activity-profit"===e.key?(u(),i(s,{key:1},{default:l(()=>[p(s,{class:"rounded-20rpx p-10rpx gap-18rpx b-2rpx b-[rgba(255,146,88,0.2)] flex items-center"},{default:l(()=>[p(s,{class:"mb-16rpx gap-12rpx flex items-start"},{default:l(()=>[p(s,{class:"pt-12rpx flex flex-shrink-0 items-center"},{default:l(()=>[p(w,{width:"32rpx",height:"32rpx",class:"mr-12rpx",src:c("data:image/png;base64,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")},null,8,["src"]),p(I,{text:"可领数根：","line-height":"38rpx"})]),_:1}),p(s,{class:"gap-8rpx flex flex-wrap"},{default:l(()=>[(u(!0),f(g,null,h((e.content||[]).filter(e=>1===e.type&&e.title),e=>(u(),i(s,{key:e.id,class:"px-40rpx pt-12rpx pb-10rpx text-28rpx bg-#29A2FB1A leading-38rpx rounded-full"},{default:l(()=>[p(s,{class:"linear-gradient-text",style:m({background:"linear-gradient(90deg, #09DAFF 0%, #29A2FB 100%)"})},{default:l(()=>[y(B(e.title),1)]),_:2},1032,["style"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024),p(s,{class:"rounded-20rpx p-10rpx gap-18rpx b-2rpx b-[rgba(255,146,88,0.2)] flex items-center"},{default:l(()=>[p(s,{class:"mb-16rpx gap-12rpx flex items-start"},{default:l(()=>[p(s,{class:"pt-12rpx flex flex-shrink-0 items-center"},{default:l(()=>[p(w,{width:"32rpx",height:"32rpx",class:"mr-12rpx",src:c("data:image/png;base64,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")},null,8,["src"]),p(I,{text:"可领权益：","line-height":"38rpx"})]),_:1}),p(s,{class:"gap-8rpx flex flex-wrap"},{default:l(()=>[(u(!0),f(g,null,h((e.content||[]).filter(e=>2===e.type&&e.title),e=>(u(),i(s,{key:e.id,class:"px-40rpx pt-12rpx pb-10rpx text-28rpx bg-#FF6A001A leading-38rpx rounded-full"},{default:l(()=>[p(s,{class:"linear-gradient-text",style:m({background:"linear-gradient(90deg, #FFAE00 0%, #FF6A00 100%)"})},{default:l(()=>[y(B(e.title),1)]),_:2},1032,["style"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):d("",!0),"introduce"===e.key||"register-condition"===e.key?A((u(),i(s,{key:2},null,512)),[[Q,e.content]]):d("",!0)]),_:1},8,["card-title","card-info","sections","banner-src","extra-button-text","is-btn-show","extra-button-props"])]),_:1})}}}),[["__scopeId","data-v-60565530"]]);export{U as default};
