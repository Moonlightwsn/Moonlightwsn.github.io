import{_ as t}from"./BannerView.vue_vue_type_script_setup_true_lang.DmfbxBw6.js";import{d as e,c as a,a as s,e as r,w as l,b as i,E as o,y as n,z as p,A as u,D as f,_ as d,H as x,B as c,r as m,ad as _,K as g,L as h,M as y,t as b,P as v}from"./index-Ds74MHcT.js";import{_ as k}from"./PyText.vue_vue_type_script_setup_true_lang.CFtQAE6q.js";import{_ as w}from"./PyTitle.DGyNiBQ9.js";import{a as j}from"./index.B_ZUDrBI.js";import{u as P,_ as C}from"./usePaged.jVvaA2s1.js";import{b as L,_ as B,a as E}from"./wd-tab.BDXvK7ut.js";import"./wd-text.Cjrddyq4.js";const S=d(e({name:"NProfitListItem",__name:"NProfitListItem",props:{avatarSrc:{default:void 0},expireTime:{default:void 0},issuer:{},pythrootList:{default:()=>[]},title:{}},emits:["extraButtonClick"],setup(t,{emit:e}){const d=e;function x(t){t.stopPropagation(),d("extraButtonClick")}return(t,e)=>{const d=o,c=r,m=w,_=k,g=f;return s(),a(c,{class:"n-profit-list-item rounded-30rpx bg-#fff relative flex"},{default:l(()=>[i(c,{class:"w-248rpx h-248rpx rounded-tl-30rpx rounded-bl-30rpx flex-shrink-0 overflow-hidden"},{default:l(()=>[i(d,{width:"100%",height:"100%",alt:"",mode:"aspectFill",src:t.avatarSrc},null,8,["src"])]),_:1}),i(c,{class:"h-248rpx w-6rpx overflow-hidden"},{default:l(()=>[i(c,{class:"dashed-divider"})]),_:1}),i(c,{class:"py-16rpx pl-28rpx pr-32rpx gap-4rpx flex flex-grow flex-col"},{default:l(()=>[i(m,{"custom-class":"!font-600 mb-12rpx",text:t.title,size:"28rpx","line-height":"normal",bold:""},null,8,["text"]),i(c,{class:"gap-2rpx pr-11rpx flex flex-col"},{default:l(()=>[i(c,{class:"gap-24rpx inline-flex"},{default:l(()=>[i(_,{"custom-class":"flex-shrink-0",text:"发行方: "}),i(c,{class:"text-container flex items-center justify-center"},{default:l(()=>[i(c,{class:"text-gradient font-500 px-18rpx rounded-24rpx bg-#29a2fb25 text-24rpx pt-0 leading-none"},{default:l(()=>[n(p(t.issuer),1)]),_:1})]),_:1})]),_:1}),i(c,{class:"gap-24rpx inline-flex"},{default:l(()=>[i(_,{"custom-class":"flex-shrink-0",text:"关联数根: "}),i(_,{"custom-class":"font-300",lines:1,text:t.pythrootList.length>0?t.pythrootList.join(" "):"无"},null,8,["text"])]),_:1}),i(c,{class:"gap-24rpx inline-flex"},{default:l(()=>[i(_,{"custom-class":"flex-shrink-0",text:"到期时间: "}),i(_,{"custom-class":"font-300",lines:1,text:`${u(j)(t.expireTime,"YYYY年MM月DD日")}`},null,8,["text"])]),_:1})]),_:1}),i(c,{class:"flex justify-end"},{default:l(()=>[i(g,{onClick:x},{default:l(()=>[n(" 去使用 ")]),_:1})]),_:1})]),_:1}),i(c,{class:"round-mask bg-#f5f5f5 w-86rpx h-86rpx absolute right-0 top-1/2 translate-x-1/2 translate-y--1/2 rounded-full"})]),_:1})}}}),[["__scopeId","data-v-e8872cd9"]]),D=e({__name:"index",setup(e){const o=x(),n=c("all"),p=[{key:"all",title:"全部"}],f=c(new Map);const{list:d}=P(async function(t){f.value.clear();const e=await v.app.getOrderPage({params:{type:2,status:0,...t}}),{code:a,data:s}=e||{};if(0!==a||!s)throw new Error("获取数据失败");const{list:r}=s;return(r||[]).forEach(t=>{const e=[];Array.isArray(t.productsIssue)&&t.productsIssue.forEach(t=>{e.push(t.name)}),void 0!==t.id&&f.value.set(t.id,e)}),s});return(e,x)=>{const c=E,v=B,k=r,w=L,j=C,P=S,D=t,I=m("layout-tabbar-uni");return s(),a(I,null,{default:l(()=>[i(D,{"custom-class":"pb-228rpx bg-#f5f5f5","banner-height":"332rpx","banner-src":u("/assets/profit-banner-so3idplw.png")},{default:l(()=>[i(k,{class:"p-28rpx bg-#f5f5f5 mt-[-30rpx] rounded-t-2xl pt-0"},{default:l(()=>[i(w,{"offset-top":-44},{default:l(()=>[i(k,{class:"mb-16rpx w-690rpx bg-#f5f5f5"},{default:l(()=>[i(k,{class:"px-20rpx bg-#f5f5f5 inline-flex"},{default:l(()=>[i(v,{modelValue:u(n),"onUpdate:modelValue":x[0]||(x[0]=t=>_(n)?n.value=t:null)},{default:l(()=>[(s(),g(h,null,y(p,t=>i(c,{key:t.key,title:`${t.title}`,name:t.key},null,8,["title","name"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(k,{class:"gap-36rpx flex flex-col"},{default:l(()=>[0===u(d).length?(s(),a(k,{key:0},{default:l(()=>[i(j)]),_:1})):b("",!0),(s(!0),g(h,null,y(u(d),(t,e)=>(s(),a(P,{color:"orange",key:e,"avatar-src":t.productSpuPicUrl,title:t.productSpuName,issuer:t.issuerName,"pythroot-list":u(f).get(t.id)||[],"expire-time":t.expireTime,onClick:e=>{return a=t.id,void o.push({name:"profitDetail",params:{id:String(a)}});var a},onExtraButtonClick:e=>{return a=t.id,void o.push({name:"profitQRCode",params:{id:String(a)}});var a}},null,8,["avatar-src","title","issuer","pythroot-list","expire-time","onClick","onExtraButtonClick"]))),128))]),_:1})]),_:1})]),_:1},8,["banner-src"])]),_:1})}}});export{D as default};
